# Document 3: Interaction Flow & User Scenario Blueprint

## 사용자 시나리오 및 인터랙션 플로우 설계서

**Version:** 1.0.0  
**Date:** 2025-01-22  
**Author:** Nam Hyun-woo (남현우 교수)  
**Status:** Final Design Package

---

## 📋 Table of Contents

1. [문서 목적](#1-문서-목적)
2. [사용자 페르소나](#2-사용자-페르소나)
3. [핵심 사용자 여정](#3-핵심-사용자-여정)
4. [시나리오 1: AI 기반 전시 기획](#4-시나리오-1-ai-기반-전시-기획)
5. [시나리오 2: 초개인화 대시보드 사용](#5-시나리오-2-초개인화-대시보드-사용)
6. [시나리오 3: 소장품 등록 및 관리](#6-시나리오-3-소장품-등록-및-관리)
7. [시나리오 4: 교육 프로그램 운영](#7-시나리오-4-교육-프로그램-운영)
8. [시나리오 5: 실시간 협업](#8-시나리오-5-실시간-협업)
9. [시퀀스 다이어그램](#9-시퀀스-다이어그램)
10. [상태 전이 다이어그램](#10-상태-전이-다이어그램)
11. [예외 상황 처리](#11-예외-상황-처리)
12. [사용자 피드백 수집](#12-사용자-피드백-수집)

---

## 1. 문서 목적

### 1.1 문서의 목표

본 문서는 **MuseFlow V4 시스템의 사용자 인터랙션 플로우와 실제 사용 시나리오**를 상세히 기술하여, 개발팀과 디자인팀이 **사용자 중심의 기능을 구현**할 수 있도록 가이드를 제공합니다.

### 1.2 대상 독자

- **UX/UI 디자이너**: 사용자 여정 맵 작성 및 프로토타입 제작
- **프론트엔드 개발자**: 인터랙션 로직 구현
- **백엔드 개발자**: API 요청/응답 흐름 이해
- **QA 팀**: 사용 시나리오 기반 테스트 케이스 작성
- **Product Owner**: 기능 우선순위 결정

---

## 2. 사용자 페르소나

### 2.1 페르소나 1: 김큐레이터 (Curator)

```yaml
이름: 김지은
나이: 35세
직책: 수석 큐레이터
경력: 10년

목표:
  - 성공적인 전시 기획 및 운영
  - 작품 큐레이션 및 스토리텔링
  - 관람객 참여 증대

Pain Points:
  - 전시 기획 시 복잡한 행정 절차
  - 작품 정보 파편화 (여러 시스템에 분산)
  - 예산 관리 및 일정 조율의 어려움
  - 반복적인 보고서 작성

기대하는 기능:
  - AI 기반 전시 자동 기획
  - 통합된 작품 데이터베이스
  - 실시간 예산 추적
  - 자동 보고서 생성

기술 수준:
  - 중급 (MS Office, 기본 웹 앱 사용 가능)
  - 새로운 기술 학습에 열려 있음

사용 환경:
  - 주로 사무실 데스크톱 (Windows)
  - 가끔 태블릿으로 전시장 현장 확인
```

### 2.2 페르소나 2: 박보존가 (Conservator)

```yaml
이름: 박준호
나이: 42세
직책: 수석 보존가
경력: 18년

목표:
  - 소장품의 장기 보존
  - 정밀한 상태 기록 및 처리
  - 보존 과학 연구

Pain Points:
  - 작품 상태 기록의 번거로움 (수기 → 디지털화)
  - 환경 모니터링 데이터의 복잡한 분석
  - 보존 처리 일정 관리의 어려움
  - 과거 처리 이력 추적의 불편함

기대하는 기능:
  - 디지털 상태 기록 시스템
  - 자동 환경 모니터링 알림
  - AI 기반 보존 처리 제안
  - 이력 추적 및 검색

기술 수준:
  - 초급-중급 (기본 컴퓨터 사용 가능)
  - 전문 소프트웨어 (3D 스캐닝 등) 경험

사용 환경:
  - 수장고 및 보존 처리실에서 태블릿 사용
  - 고해상도 이미지 작업 (데스크톱)
```

### 2.3 페르소나 3: 이교육사 (Educator)

```yaml
이름: 이수민
나이: 29세
직책: 교육 담당
경력: 5년

목표:
  - 다양한 관람객을 위한 교육 프로그램 개발
  - 참여형 프로그램 운영
  - 교육 효과 측정 및 개선

Pain Points:
  - 프로그램 참여자 관리의 번거로움
  - 피드백 수집 및 분석의 어려움
  - 교육 자료 제작 시간 부족
  - 관람객 데이터 활용 미흡

기대하는 기능:
  - 통합 참여자 관리 시스템
  - 자동 피드백 수집 및 분석
  - AI 기반 교육 자료 생성
  - 관람객 맞춤형 프로그램 추천

기술 수준:
  - 고급 (SNS, 디지털 도구 능숙)
  - 비디오 편집 및 디자인 툴 사용 가능

사용 환경:
  - 노트북 (MacBook) 주 사용
  - 스마트폰으로 현장 관리
```

### 2.4 페르소나 4: 최관리자 (Administrator)

```yaml
이름: 최영철
나이: 48세
직책: 행정 팀장
경력: 20년

목표:
  - 효율적인 예산 관리
  - 인사 및 시설 운영
  - 규정 준수 및 리스크 관리

Pain Points:
  - 부서별 예산 집행 현황 파악의 어려움
  - 복잡한 승인 프로세스
  - 데이터 분산으로 인한 의사결정 지연
  - 반복적인 행정 업무

기대하는 기능:
  - 통합 예산 대시보드
  - 전자 결재 시스템
  - 실시간 통계 및 리포트
  - 업무 자동화

기술 수준:
  - 중급 (ERP, 전자결재 시스템 사용 경험)
  - 데이터 분석 툴 사용 가능 (Excel 고급)

사용 환경:
  - 사무실 데스크톱 (Windows)
  - 가끔 회의실에서 태블릿 사용
```

---

## 3. 핵심 사용자 여정

### 3.1 전체 사용자 여정 맵 (User Journey Map)

```
Phase 1: Awareness (인지)
  ↓
  사용자가 MuseFlow 시스템의 필요성을 느낌
  - Trigger: 기존 시스템의 불편함, 동료 추천, 웹 검색
  - Touchpoint: 랜딩 페이지, 데모 영상, 소개 자료
  - Emotion: 기대감 😊, 호기심 🤔

Phase 2: Consideration (고려)
  ↓
  시스템 기능 및 이점 탐색
  - Trigger: 무료 데모 요청, 기능 비교
  - Touchpoint: 기능 소개 페이지, 가격 정보, 고객 사례
  - Emotion: 관심 😃, 신중함 🤨

Phase 3: Purchase/Signup (가입)
  ↓
  계정 생성 및 초기 설정
  - Trigger: 무료 체험 신청, 구독 결정
  - Touchpoint: 회원가입 페이지, 온보딩 튜토리얼
  - Emotion: 설렘 🤩, 약간의 불안 😰

Phase 4: Onboarding (온보딩)
  ↓
  시스템 학습 및 첫 작업 수행
  - Trigger: 첫 로그인, 튜토리얼 시작
  - Touchpoint: 대시보드, 가이드 투어, 샘플 프로젝트
  - Emotion: 학습 중 🧐, 성취감 😊

Phase 5: Usage (사용)
  ↓
  일상적인 업무 수행
  - Trigger: 매일 로그인, 작업 생성
  - Touchpoint: 모든 기능 화면, AI 어시스턴트, 협업 도구
  - Emotion: 생산성 향상 😎, 가끔 혼란 😵

Phase 6: Expansion (확장)
  ↓
  고급 기능 탐색 및 팀 확대
  - Trigger: 팀원 초대, 고급 기능 사용
  - Touchpoint: 팀 관리, 워크플로우 자동화, 통합 기능
  - Emotion: 전문가 기분 🤓, 만족감 🥰

Phase 7: Advocacy (옹호)
  ↓
  다른 사람에게 추천
  - Trigger: 성공 사례 공유, 리뷰 작성
  - Touchpoint: 소셜 미디어, 동료 추천, 사례 연구
  - Emotion: 자랑스러움 🏆, 충성도 ❤️
```

---

## 4. 시나리오 1: AI 기반 전시 기획

### 4.1 시나리오 개요

**목표**: 김큐레이터가 AI의 도움을 받아 "인상파 전시"를 30분 만에 기획

**시작 조건**: 
- 김큐레이터가 로그인 완료
- 대시보드 화면에서 시작

**종료 조건**:
- 전시 워크플로우 생성 완료
- Notion에 프로젝트 자동 생성
- 팀원에게 알림 발송

### 4.2 Step-by-Step 플로우

```
Step 1: Command Bar 사용
┌─────────────────────────────────────────────────────────────┐
│ User Action:                                                 │
│ - 키보드: Ctrl+K 입력                                        │
│ - 또는 마우스: Global Header의 검색창 클릭                    │
└─────────────────────────────────────────────────────────────┘
         ↓
┌─────────────────────────────────────────────────────────────┐
│ System Response:                                             │
│ - Command Bar 모달 팝업 (300ms fade-in)                      │
│ - 입력 필드에 자동 포커스                                     │
│ - 최근 명령어 및 추천 액션 표시                               │
└─────────────────────────────────────────────────────────────┘

Step 2: 자연어 입력
┌─────────────────────────────────────────────────────────────┐
│ User Action:                                                 │
│ "다음 달 인상파 전시 기획해줘, 예산 1억, 기간 3개월"         │
│ (타이핑 중...)                                                │
└─────────────────────────────────────────────────────────────┘
         ↓
┌─────────────────────────────────────────────────────────────┐
│ System Response:                                             │
│ - 실시간 자동완성 제안 (입력 중)                             │
│ - Intent Recognition 시작 (백엔드)                           │
│   → POST /api/ai/recognize-intent                           │
│   { query: "다음 달 인상파 전시 기획해줘..." }               │
└─────────────────────────────────────────────────────────────┘
         ↓
┌─────────────────────────────────────────────────────────────┐
│ Backend Processing: (< 1초)                                  │
│ - Gemini 3.0 Flash로 의도 분석                               │
│ - Intent Type: "create_workflow"                            │
│ - Parameters:                                                │
│   • theme: "인상파 전시"                                     │
│   • budget: "100,000,000 KRW"                                │
│   • duration: "3 months"                                     │
│   • start_date: "2025-03-01" (다음 달 추론)                 │
└─────────────────────────────────────────────────────────────┘

Step 3: AI 워크플로우 생성
┌─────────────────────────────────────────────────────────────┐
│ User Action:                                                 │
│ - Enter 키 입력 (또는 "생성" 버튼 클릭)                      │
└─────────────────────────────────────────────────────────────┘
         ↓
┌─────────────────────────────────────────────────────────────┐
│ System Response:                                             │
│ - Command Bar가 "생성 중..." 상태로 전환                     │
│ - 진행 상황 실시간 표시:                                      │
│   ⏳ 전시 컨셉 생성 중... (10%)                              │
│   ⏳ 작품 선정 중... (30%)                                    │
│   ⏳ 예산 배분 중... (50%)                                    │
│   ⏳ 일정 계획 중... (70%)                                    │
│   ⏳ 워크플로우 생성 중... (90%)                              │
│   ✓ 완료! (100%)                                             │
│                                                              │
│ - 예상 완료 시간: 5-10초                                      │
└─────────────────────────────────────────────────────────────┘
         ↓
┌─────────────────────────────────────────────────────────────┐
│ Backend Processing: (5-10초)                                 │
│                                                              │
│ 1. Agent Coordinator 초기화                                  │
│    → initCoordinator()                                      │
│                                                              │
│ 2. Exhibition Agent 실행                                     │
│    → POST /api/agents/exhibition/execute                    │
│    {                                                         │
│      task: "plan_exhibition",                               │
│      context: {                                              │
│        theme: "인상파 전시",                                 │
│        budget: 100000000,                                    │
│        duration: "P3M"                                       │
│      }                                                        │
│    }                                                          │
│    → 결과: 18개 노드 생성                                     │
│                                                              │
│ 3. Budget Agent 실행                                         │
│    → POST /api/agents/budget/execute                        │
│    → 결과: 예산 배분 계획                                     │
│                                                              │
│ 4. Artwork Selection Agent 실행                              │
│    → POST /api/agents/artwork/execute                       │
│    → 결과: 추천 작품 15점                                     │
│                                                              │
│ 5. Schedule Agent 실행                                       │
│    → POST /api/agents/schedule/execute                      │
│    → 결과: 간트 차트, 마일스톤                                │
│                                                              │
│ 6. Notion Integration Agent 실행                             │
│    → POST /api/agents/notion/execute                        │
│    → Notion에 프로젝트 페이지 생성                            │
│                                                              │
│ 7. 워크플로우 저장                                            │
│    → POST /api/workflows                                    │
│    { name: "인상파 전시", nodes: [...], ... }                │
└─────────────────────────────────────────────────────────────┘

Step 4: 결과 확인 (Canvas 화면 전환)
┌─────────────────────────────────────────────────────────────┐
│ System Response:                                             │
│ - Command Bar 닫힘 (fade-out 200ms)                         │
│ - Canvas 페이지로 자동 이동 (route transition)                │
│ - 생성된 워크플로우가 Canvas에 렌더링                         │
│ - Toast 알림: "전시 워크플로우가 생성되었습니다! 🎉"         │
└─────────────────────────────────────────────────────────────┘
         ↓
┌─────────────────────────────────────────────────────────────┐
│ Canvas View:                                                 │
│                                                              │
│  [인상파 전시] 워크플로우 (18개 노드)                         │
│                                                              │
│  ┌─────────┐     ┌─────────┐     ┌─────────┐              │
│  │ 컨셉 개발│ ──→ │작품 선정 │ ──→ │예산 승인│              │
│  └─────────┘     └─────────┘     └─────────┘              │
│       │               │               │                      │
│       ↓               ↓               ↓                      │
│  ┌─────────┐     ┌─────────┐     ┌─────────┐              │
│  │공간 설계│     │도록 제작│     │마케팅   │              │
│  └─────────┘     └─────────┘     └─────────┘              │
│                                                              │
│  (더 많은 노드들...)                                          │
│                                                              │
│  우측 패널:                                                   │
│  ├─ AI 생성 요약                                             │
│  ├─ 예산 배분: ₩100,000,000                                │
│  │   • 작품 운송: ₩20,000,000                               │
│  │   • 공간 설치: ₩30,000,000                               │
│  │   • 마케팅: ₩15,000,000                                  │
│  │   • 기타: ₩35,000,000                                    │
│  ├─ 추천 작품 (15점)                                         │
│  └─ 일정: 2025-03-01 ~ 2025-05-31                          │
└─────────────────────────────────────────────────────────────┘

Step 5: 팀원 초대 및 협업 시작
┌─────────────────────────────────────────────────────────────┐
│ User Action:                                                 │
│ - "팀 공유" 버튼 클릭                                         │
│ - 팀원 이메일 입력: "park@museum.org, lee@museum.org"       │
│ - "초대" 버튼 클릭                                            │
└─────────────────────────────────────────────────────────────┘
         ↓
┌─────────────────────────────────────────────────────────────┐
│ System Response:                                             │
│ - 이메일 발송: "김큐레이터님이 '인상파 전시' 프로젝트에 초대했습니다"│
│ - Notion 페이지에 팀원 자동 추가                              │
│ - 대시보드에 알림 표시 (팀원들에게)                           │
│ - Toast: "팀원 2명이 초대되었습니다."                        │
└─────────────────────────────────────────────────────────────┘
```

### 4.3 시퀀스 다이어그램 (Sequence Diagram)

```
User          Frontend        Backend         Gemini API      Agents          Notion API
 │                │              │                │             │                │
 │  Ctrl+K        │              │                │             │                │
 ├───────────────>│              │                │             │                │
 │                │ Open Modal   │                │             │                │
 │<───────────────┤              │                │             │                │
 │                │              │                │             │                │
 │ "인상파 전시..." │             │                │             │                │
 ├───────────────>│              │                │             │                │
 │                │ POST /api/ai/recognize-intent │             │                │
 │                ├─────────────>│                │             │                │
 │                │              │ Gemini API     │             │                │
 │                │              ├───────────────>│             │                │
 │                │              │<───────────────┤             │                │
 │                │              │ Intent: create_workflow      │                │
 │                │<─────────────┤                │             │                │
 │                │              │                │             │                │
 │  "Enter" Key   │              │                │             │                │
 ├───────────────>│              │                │             │                │
 │                │ POST /api/ai/generate-workflow│             │                │
 │                ├─────────────>│                │             │                │
 │                │              │ initCoordinator()            │                │
 │                │              ├─────────────────────────────>│                │
 │                │              │                │             │                │
 │                │              │ Exhibition Agent.execute()   │                │
 │                │              ├─────────────────────────────>│                │
 │                │              │                │             │ Gemini API     │
 │                │              │                │             ├───────────────>│
 │                │              │                │             │<───────────────┤
 │                │              │<─────────────────────────────┤                │
 │                │              │ Nodes: 18개                   │                │
 │                │              │                │             │                │
 │                │              │ Budget Agent.execute()       │                │
 │                │              ├─────────────────────────────>│                │
 │                │              │<─────────────────────────────┤                │
 │                │              │                │             │                │
 │                │              │ Notion Agent.execute()       │                │
 │                │              ├─────────────────────────────>│                │
 │                │              │                │             │ Create Project │
 │                │              │                │             ├───────────────>│
 │                │              │                │             │<───────────────┤
 │                │              │<─────────────────────────────┤                │
 │                │              │                │             │                │
 │                │              │ POST /api/workflows          │                │
 │                │              │ (Save to D1)   │             │                │
 │                │              │                │             │                │
 │                │<─────────────┤                │             │                │
 │                │ Workflow ID: 123              │             │                │
 │<───────────────┤              │                │             │                │
 │ Redirect       │              │                │             │                │
 │ to Canvas      │              │                │             │                │
 │                │              │                │             │                │
```

---

## 5. 시나리오 2: 초개인화 대시보드 사용

### 5.1 시나리오 개요

**목표**: 김큐레이터가 매일 아침 대시보드에서 오늘의 업무를 효율적으로 파악

**시작 조건**: 로그인 직후

**종료 조건**: 오늘의 주요 작업 3가지 확인 및 시작

### 5.2 Step-by-Step 플로우

```
Step 1: 로그인 및 대시보드 로딩
┌─────────────────────────────────────────────────────────────┐
│ User Action:                                                 │
│ - 로그인 완료 (이메일/비밀번호 또는 OAuth)                    │
└─────────────────────────────────────────────────────────────┘
         ↓
┌─────────────────────────────────────────────────────────────┐
│ System Response:                                             │
│ - JWT 토큰 발급 및 localStorage 저장                         │
│ - Redirect to /dashboard                                    │
│ - 대시보드 로딩 시작                                          │
│                                                              │
│ Backend Calls:                                               │
│ 1. GET /api/auth/me → 사용자 정보 조회                       │
│ 2. GET /api/dashboard/config → 대시보드 설정 조회            │
│ 3. GET /api/behavior-log?days=7 → 최근 행동 데이터 조회     │
│ 4. Personalization Engine 실행:                              │
│    - 빈도 분석 (자주 사용하는 위젯 TOP 5)                     │
│    - 시간대 패턴 분석 (오전/오후 주요 작업)                   │
│    - 협업 필터링 (같은 역할 사용자 패턴)                      │
│    → POST /api/dashboard/personalize                        │
│ 5. GET /api/dashboard/widgets → 위젯 데이터 로드             │
└─────────────────────────────────────────────────────────────┘
         ↓
┌─────────────────────────────────────────────────────────────┐
│ Frontend Rendering: (< 1초)                                  │
│                                                              │
│ 1. Skeleton Screen 표시 (즉시)                               │
│    - 위젯 모양의 회색 박스들                                  │
│    - 로딩 애니메이션 (shimmer effect)                        │
│                                                              │
│ 2. 데이터 도착 시 실제 콘텐츠로 교체 (fade-in 200ms)         │
│                                                              │
│ 3. 개인화된 위젯 배치:                                        │
│    ┌──────────────────────────────────────────────────────┐│
│    │ 📊 내 대시보드             오전 9:23 | ☀️ 맑음       ││
│    │                                         [편집 모드 🔧]││
│    ├──────────────────────────────────────────────────────┤│
│    │ 💡 AI 추천: "오늘은 전시 기획서 승인이 우선순위입니다"│││
│    ├──────────────────────────────────────────────────────┤│
│    │                                                       ││
│    │ ┌──────────────────┐ ┌──────────────────────────┐   ││
│    │ │ 오늘의 작업 (5)   │ │ AI 제안: 우선순위         │   ││
│    │ │ ☐ 전시 기획서 승인│ │ 1. 기획서 승인 (긴급)     │   ││
│    │ │ ☐ 예산안 검토     │ │ 2. 작품 상태 점검 (D-3)   │   ││
│    │ │ ☐ 팀 회의 (2pm)  │ │ 3. 도슨트 교육 준비        │   ││
│    │ └──────────────────┘ └──────────────────────────┘   ││
│    │ ┌─────────────────────────────────────────────────┐ ││
│    │ │ 진행 중인 프로젝트 (2)                           │ ││
│    │ │ ├─ 인상파 전시 ████████░░ 67% (D-14)           │ ││
│    │ │ └─ 교육 프로그램 ██████████ 92% (D-3)           │ ││
│    │ └─────────────────────────────────────────────────┘ ││
│    │ ┌──────────────────┐ ┌──────────────────────────┐   ││
│    │ │ 관람객 예측       │ │ 예산 집행 현황             │   ││
│    │ │ 📈 이번 주 +15%  │ │ 💰 85% 집행                │   ││
│    │ └──────────────────┘ └──────────────────────────┘   ││
│    └──────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────┘

Step 2: 첫 번째 작업 시작 (전시 기획서 승인)
┌─────────────────────────────────────────────────────────────┐
│ User Action:                                                 │
│ - "오늘의 작업" 위젯에서 "☐ 전시 기획서 승인" 클릭           │
└─────────────────────────────────────────────────────────────┘
         ↓
┌─────────────────────────────────────────────────────────────┐
│ System Response:                                             │
│ - 우측 슬라이드 패널 오픈 (slide-in 300ms)                   │
│ - 작업 상세 정보 표시:                                        │
│                                                              │
│   ┌────────────────────────────────────────────────────┐   │
│   │ ✕ 닫기              전시 기획서 승인                 │   │
│   ├────────────────────────────────────────────────────┤   │
│   │ 프로젝트: 인상파 전시                                │   │
│   │ 담당자: 김큐레이터                                    │   │
│   │ 마감: 2025-01-23 17:00 (오늘!)                      │   │
│   │ 우선순위: 🔴 긴급                                    │   │
│   ├────────────────────────────────────────────────────┤   │
│   │ 설명:                                                │   │
│   │ 인상파 전시 기획서를 검토하고 최종 승인해주세요.       │   │
│   │                                                      │   │
│   │ 첨부 파일:                                            │   │
│   │ 📄 인상파_전시기획서_v3.pdf (2.4MB)                  │   │
│   │ 📊 예산안_최종.xlsx (124KB)                          │   │
│   ├────────────────────────────────────────────────────┤   │
│   │ AI 요약:                                             │   │
│   │ "이 기획서는 19세기 프랑스 인상파 작품 15점을 중심으로│   │
│   │  3개월 전시를 계획하고 있습니다. 총 예산은 1억 원이며,│   │
│   │  현재 계획은 적정 수준입니다."                        │   │
│   ├────────────────────────────────────────────────────┤   │
│   │ 액션:                                                │   │
│   │ [승인] [반려] [수정 요청] [나중에]                   │   │
│   └────────────────────────────────────────────────────┘   │
│                                                              │
│ - 행동 로그 기록:                                             │
│   POST /api/behavior-log                                    │
│   {                                                          │
│     action_type: "click",                                   │
│     action_target: "task-approval",                         │
│     context: { task_id: 47, priority: "urgent" }           │
│   }                                                          │
└─────────────────────────────────────────────────────────────┘

Step 3: PDF 미리보기 및 승인
┌─────────────────────────────────────────────────────────────┐
│ User Action:                                                 │
│ - PDF 파일명 클릭 → 새 탭에서 PDF 오픈                       │
│ - PDF 검토 (5분)                                              │
│ - 슬라이드 패널로 돌아와 "승인" 버튼 클릭                     │
└─────────────────────────────────────────────────────────────┘
         ↓
┌─────────────────────────────────────────────────────────────┐
│ System Response:                                             │
│ - 승인 확인 모달 표시:                                        │
│   "정말 승인하시겠습니까? 이 작업은 되돌릴 수 없습니다."      │
│   [취소] [승인]                                              │
│                                                              │
│ - "승인" 클릭 시:                                             │
│   1. PUT /api/tasks/47/approve                              │
│   2. 작업 상태 변경: pending → approved                      │
│   3. 담당자에게 알림 발송                                     │
│   4. Notion 업데이트 (체크박스 체크)                         │
│   5. 대시보드 "오늘의 작업" 위젯 업데이트                     │
│      → "☑ 전시 기획서 승인" (체크 표시)                      │
│   6. Toast 알림: "승인이 완료되었습니다. ✓"                  │
│   7. 슬라이드 패널 자동 닫힘                                  │
│                                                              │
│ - AI 학습:                                                    │
│   POST /api/personalization/learn                           │
│   {                                                          │
│     event: "task_completed",                                │
│     task_type: "approval",                                  │
│     time_spent: 300, // 5분                                 │
│     time_of_day: "morning" // 오전 9시대                    │
│   }                                                          │
│   → 다음부터 오전에 승인 작업 우선 제안                       │
└─────────────────────────────────────────────────────────────┘

Step 4: 다음 작업 자동 제안
┌─────────────────────────────────────────────────────────────┐
│ System Response: (자동, 2초 후)                               │
│ - 우측 하단에 작은 알림 카드 표시 (slide-up 200ms):          │
│                                                              │
│   ┌────────────────────────────────────────────────────┐   │
│   │ 🤖 AI 제안                                      [✕]│   │
│   │                                                    │   │
│   │ 다음 작업을 시작하시겠어요?                        │   │
│   │ → "예산안 검토" (중간 우선순위, 30분 소요 예상)    │   │
│   │                                                    │   │
│   │ [시작하기] [나중에]                                │   │
│   └────────────────────────────────────────────────────┘   │
│                                                              │
│ - "시작하기" 클릭 시: 해당 작업 상세 패널 오픈                │
│ - "나중에" 클릭 시: 알림 카드 사라짐                          │
│ - 자동 닫힘: 10초 후                                          │
└─────────────────────────────────────────────────────────────┘
```

---

## 6. 시나리오 3: 소장품 등록 및 관리

### 6.1 시나리오 개요

**목표**: 박보존가가 새로 수집한 백자대호를 시스템에 등록

**시작 조건**: 수집·보존 작업공간 진입

**종료 조건**: 작품 등록 완료, AI 분석 결과 확인

### 6.2 Step-by-Step 플로우

```
Step 1: 수집·보존 작업공간 진입
User Action: Side Nav에서 "수집·보존" 클릭
  ↓
System Response:
  - /workspace/collection 페이지로 이동
  - 소장품 목록 표시 (Grid View)
  - 검색 바 + 필터 옵션 표시
  - 우측 상단: [+ 새 작품 등록] 버튼

Step 2: 작품 등록 폼 오픈
User Action: [+ 새 작품 등록] 버튼 클릭
  ↓
System Response:
  - 전체 화면 모달 오픈 (slide-up 300ms)
  - Multi-step 등록 폼 표시:
    ┌────────────────────────────────────────────────────┐
    │ [✕ 닫기]           새 작품 등록                     │
    ├────────────────────────────────────────────────────┤
    │ 진행 단계: ●━━━━━━━━━━ 1/5                          │
    │                                                    │
    │ Step 1: 기본 정보                                   │
    │                                                    │
    │ 소장번호 *                                          │
    │ [________________] 🔍 중복 확인                    │
    │ 형식: YYYY.###  예) 2025.047                       │
    │                                                    │
    │ 작품명 *                                            │
    │ [________________________________________________]│
    │                                                    │
    │ 작가명                                              │
    │ [________________________________________________]│
    │                                                    │
    │ 제작 시대 *                                         │
    │ [조선시대 ▼] [18세기 ▼]                            │
    │                                                    │
    │ 재료 *                                              │
    │ [백자 ▼]                                           │
    │                                                    │
    │ [취소] [다음 →]                                    │
    └────────────────────────────────────────────────────┘

Step 3: 이미지 업로드 (Step 2/5)
User Action: [다음 →] 버튼 클릭 (유효성 검사 통과 후)
  ↓
System Response:
  - Step 2 화면으로 전환 (slide-left 200ms)
  - 진행 바 업데이트: ●●━━━━━━━━ 2/5
    ┌────────────────────────────────────────────────────┐
    │ Step 2: 이미지 업로드                                │
    │                                                    │
    │ 작품 이미지 *                                       │
    │ ┌──────────────────────────────────────────────┐  │
    │ │                                               │  │
    │ │       [📷 이미지를 드롭하거나 클릭하세요]      │  │
    │ │                                               │  │
    │ │  권장: 1920x1080px 이상, JPG/PNG, 최대 10MB   │  │
    │ └──────────────────────────────────────────────┘  │
    │                                                    │
    │ 추가 이미지 (선택)                                  │
    │ [+ 이미지 추가]                                     │
    │                                                    │
    │ [← 이전] [다음 →]                                  │
    └────────────────────────────────────────────────────┘

User Action: 
  - Drag & Drop으로 이미지 파일 추가
  - 또는 클릭하여 파일 선택 대화상자 오픈
    ↓
System Response:
  - 파일 업로드 시작
  - 진행률 표시: ████████░░ 75%
  - 업로드 완료 후 썸네일 표시
  - 자동으로 AI 이미지 분석 시작:
    POST /api/artwork/analyze-image
    {
      image_url: "https://r2.../artwork-12345.jpg"
    }
    ↓
  - AI 분석 결과 (5초 후):
    ┌────────────────────────────────────────────────┐
    │ 🤖 AI 분석 결과                                 │
    │                                                │
    │ 자동 감지된 정보:                               │
    │ ├─ 재료: 백자 (신뢰도: 95%)                     │
    │ ├─ 색상: 흰색, 크림색 (주요 색상)               │
    │ ├─ 크기 예상: 높이 40-50cm                      │
    │ └─ 상태: 양호 (균열 없음, 표면 깨끗)            │
    │                                                │
    │ 자동 태그:                                      │
    │ #조선백자 #대호 #18세기 #백자                   │
    │                                                │
    │ 유사 작품: 3점 발견                             │
    │ [유사 작품 보기 →]                              │
    │                                                │
    │ [AI 결과 적용] [무시]                           │
    └────────────────────────────────────────────────┘

Step 4: 크기 및 상태 정보 (Step 3/5)
User Action: 
  - [AI 결과 적용] 클릭 → AI 감지 정보가 자동으로 필드에 입력됨
  - [다음 →] 클릭
    ↓
System Response:
  - Step 3 화면으로 전환
  - 진행 바: ●●●━━━━━━━ 3/5
    ┌────────────────────────────────────────────────────┐
    │ Step 3: 크기 및 상태                                │
    │                                                    │
    │ 크기 (cm) *                                         │
    │ 높이: [45.0__] 가로: [20.0__] 세로: [20.0__]     │
    │                                                    │
    │ 무게 (kg)                                           │
    │ [3.2___]                                           │
    │                                                    │
    │ 현재 상태 *                                         │
    │ [양호 ▼] (양호 / 보통 / 보존처리 필요)             │
    │                                                    │
    │ 상태 점수                                           │
    │ ├───────────────────────────────────────── (95)│   │
    │ 0                                           100    │
    │                                                    │
    │ 상태 설명                                           │
    │ [________________________________________]         │
    │ [________________________________________]         │
    │ [________________________________________]         │
    │                                                    │
    │ [← 이전] [다음 →]                                  │
    └────────────────────────────────────────────────────┘

Step 5: 보관 및 이력 정보 (Step 4/5)
User Action: [다음 →] 클릭
  ↓
System Response:
  - Step 4 화면으로 전환
  - 진행 바: ●●●●━━━━━━ 4/5
    ┌────────────────────────────────────────────────────┐
    │ Step 4: 보관 및 이력                                │
    │                                                    │
    │ 보관 위치 *                                         │
    │ [1층 수장고 ▼] [선반: A-25__]                      │
    │                                                    │
    │ 수집 방법                                           │
    │ [구입 ▼] (구입 / 기증 / 발굴 / 교환)               │
    │                                                    │
    │ 수집일                                              │
    │ [2025-01-20____] 📅                                │
    │                                                    │
    │ 출처 (Provenance)                                  │
    │ [________________________________________]         │
    │ [________________________________________]         │
    │                                                    │
    │ 이전 소유자                                         │
    │ [________________________________________]         │
    │                                                    │
    │ [← 이전] [다음 →]                                  │
    └────────────────────────────────────────────────────┘

Step 6: 최종 확인 및 저장 (Step 5/5)
User Action: [다음 →] 클릭
  ↓
System Response:
  - Step 5 (최종 확인) 화면으로 전환
  - 진행 바: ●●●●●━━━━━ 5/5
    ┌────────────────────────────────────────────────────┐
    │ Step 5: 최종 확인                                   │
    │                                                    │
    │ 입력한 정보를 확인해주세요.                          │
    │                                                    │
    │ ┌──────────────┐                                  │
    │ │   [이미지]    │  소장번호: 2025.047               │
    │ │   미리보기    │  작품명: 백자대호                  │
    │ └──────────────┘  작가: 미상                       │
    │                   시대: 조선시대 18세기              │
    │                   재료: 백자                        │
    │                   크기: 45 x 20 x 20 cm            │
    │                   상태: 양호 (95점)                 │
    │                   보관: 1층 수장고 A-25             │
    │                   수집일: 2025-01-20                │
    │                                                    │
    │ [← 이전] [수정] [저장]                              │
    └────────────────────────────────────────────────────┘

User Action: [저장] 버튼 클릭
  ↓
System Response:
  1. 로딩 오버레이 표시:
     "작품을 등록하는 중입니다... ⏳"
  
  2. Backend API 호출:
     POST /api/artworks
     {
       accession_number: "2025.047",
       title: "백자대호",
       artist: "미상",
       period: "조선시대 18세기",
       medium: "백자",
       dimensions: { height: 45, width: 20, depth: 20 },
       condition: { status: "good", score: 95 },
       location: { building: "1층 수장고", shelf: "A-25" },
       acquisition: {
         method: "purchase",
         date: "2025-01-20"
       },
       images: ["https://r2.../artwork-12345.jpg"],
       ai_metadata: { ... }
     }
  
  3. D1 데이터베이스 저장:
     INSERT INTO artworks (...)
  
  4. Cloudflare R2에 이미지 저장
  
  5. Knowledge Graph 업데이트:
     - Entity 생성: "백자대호 (2025.047)"
     - Relationship 생성: "조선시대" → "백자대호"
  
  6. 완료 후:
     - 모달 닫힘 (fade-out 200ms)
     - Toast 알림: "작품이 성공적으로 등록되었습니다! ✓"
     - 소장품 목록에 새 작품 추가됨 (Grid에 카드 추가)
     - 작품 상세 페이지로 자동 이동 (선택 사항)
```

---

## 7. 시나리오 4: 교육 프로그램 운영

_(구조는 동일하게 작성, 상세 내용 생략)_

---

## 8. 시나리오 5: 실시간 협업

_(구조는 동일하게 작성, 상세 내용 생략)_

---

## 9. 시퀀스 다이어그램

### 9.1 대시보드 개인화 시퀀스

```
User          Frontend        Backend         D1 Database     Personalization
 │                │              │                │                │
 │  Login         │              │                │                │
 ├───────────────>│              │                │                │
 │                │ POST /api/auth/login          │                │
 │                ├─────────────>│                │                │
 │                │<─────────────┤                │                │
 │                │ JWT Token    │                │                │
 │<───────────────┤              │                │                │
 │                │              │                │                │
 │  Redirect /dashboard          │                │                │
 ├───────────────>│              │                │                │
 │                │ GET /api/dashboard/config     │                │
 │                ├─────────────>│                │                │
 │                │              │ SELECT * FROM  │                │
 │                │              │ dashboard_configs               │
 │                │              ├───────────────>│                │
 │                │              │<───────────────┤                │
 │                │              │                │                │
 │                │              │ POST /api/personalize           │
 │                │              ├────────────────────────────────>│
 │                │              │                │                │
 │                │              │ SELECT * FROM  │                │
 │                │              │ user_behavior_logs              │
 │                │              ├───────────────>│                │
 │                │              │<───────────────┤                │
 │                │              │                │  Analyze       │
 │                │              │                │  Patterns      │
 │                │              │<────────────────────────────────┤
 │                │              │ Recommendations│                │
 │                │<─────────────┤                │                │
 │                │ Config + Recommendations      │                │
 │<───────────────┤              │                │                │
 │  Dashboard     │              │                │                │
 │  Rendered      │              │                │                │
 │                │              │                │                │
```

---

## 10. 상태 전이 다이어그램

### 10.1 워크플로우 상태 전이

```
                  ┌────────┐
                  │ Draft  │ (초안)
                  └───┬────┘
                      │ start()
                      ▼
              ┌──────────────┐
              │   Active     │ (진행 중)
              └───┬──────┬───┘
         pause() │      │ complete()
                  ▼      ▼
          ┌─────────┐  ┌──────────┐
          │ Paused  │  │Completed │ (완료)
          └───┬─────┘  └────┬─────┘
     resume() │             │ archive()
              │             ▼
              │        ┌──────────┐
              └───────>│ Archived │ (보관)
                       └──────────┘
```

---

## 11. 예외 상황 처리

### 11.1 네트워크 오류

```javascript
// 시나리오: AI 워크플로우 생성 중 네트워크 끊김
try {
  const response = await fetch('/api/ai/generate-workflow', {
    method: 'POST',
    body: JSON.stringify(workflowData)
  });
  
  if (!response.ok) {
    throw new Error(`HTTP ${response.status}`);
  }
  
  const result = await response.json();
  // 성공 처리...
  
} catch (error) {
  if (error.name === 'TypeError') {
    // 네트워크 오류
    showToast(
      '네트워크 연결을 확인해주세요. 인터넷에 연결되어 있지 않습니다.',
      'error',
      5000
    );
    
    // 자동 재시도 (3회)
    retryWithBackoff(generateWorkflow, 3, 1000);
    
  } else if (error.message.includes('500')) {
    // 서버 오류
    showToast(
      '서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.',
      'error'
    );
    
  } else {
    // 기타 오류
    showToast(error.message, 'error');
  }
}
```

### 11.2 유효성 검사 실패

```javascript
// 시나리오: 작품 등록 폼에서 필수 필드 누락
function validateArtworkForm(formData) {
  const errors = {};
  
  if (!formData.accession_number) {
    errors.accession_number = '소장번호는 필수 항목입니다.';
  } else if (!/^\d{4}\.\d{3}$/.test(formData.accession_number)) {
    errors.accession_number = '소장번호 형식이 올바르지 않습니다. (예: 2025.047)';
  }
  
  if (!formData.title) {
    errors.title = '작품명은 필수 항목입니다.';
  }
  
  if (!formData.period) {
    errors.period = '제작 시대는 필수 항목입니다.';
  }
  
  if (Object.keys(errors).length > 0) {
    // 에러 표시
    for (const [field, message] of Object.entries(errors)) {
      showFieldError(field, message);
    }
    
    // 첫 번째 에러 필드로 스크롤
    const firstErrorField = document.querySelector('.error');
    firstErrorField.scrollIntoView({ behavior: 'smooth', block: 'center' });
    firstErrorField.focus();
    
    return false;
  }
  
  return true;
}
```

---

## 12. 사용자 피드백 수집

### 12.1 In-App 피드백 위젯

```html
<!-- 우측 하단 고정 피드백 버튼 -->
<button class="feedback-button" aria-label="피드백 보내기">
  <i class="fas fa-comment"></i>
</button>

<!-- 피드백 모달 -->
<div class="feedback-modal">
  <h3>피드백 보내기</h3>
  <p>시스템을 개선할 수 있도록 의견을 들려주세요.</p>
  
  <div class="rating">
    <label>만족도:</label>
    <div class="stars">
      <i class="far fa-star" data-rating="1"></i>
      <i class="far fa-star" data-rating="2"></i>
      <i class="far fa-star" data-rating="3"></i>
      <i class="far fa-star" data-rating="4"></i>
      <i class="far fa-star" data-rating="5"></i>
    </div>
  </div>
  
  <div class="feedback-category">
    <label>카테고리:</label>
    <select>
      <option value="bug">버그 리포트</option>
      <option value="feature">기능 제안</option>
      <option value="ux">UX 개선</option>
      <option value="other">기타</option>
    </select>
  </div>
  
  <div class="feedback-message">
    <label>상세 내용:</label>
    <textarea rows="5" placeholder="자세히 설명해주세요..."></textarea>
  </div>
  
  <div class="feedback-screenshot">
    <label>
      <input type="checkbox" id="include-screenshot">
      현재 화면 캡처 포함
    </label>
  </div>
  
  <button class="btn btn-primary">피드백 보내기</button>
</div>
```

---

## 부록 A: 사용자 스토리

```yaml
US-001:
  As a: Curator
  I want to: AI를 사용하여 전시를 빠르게 기획하고 싶다
  So that: 반복적인 작업 시간을 절약하고 창의적인 부분에 집중할 수 있다
  
  Acceptance Criteria:
    - [ ] 자연어로 전시 요구사항 입력 가능
    - [ ] 30초 이내에 워크플로우 생성 완료
    - [ ] 생성된 워크플로우를 수정 가능
    - [ ] Notion에 자동으로 프로젝트 생성됨

US-002:
  As a: Conservator
  I want to: 작품 상태를 디지털로 기록하고 싶다
  So that: 과거 이력을 쉽게 추적하고 분석할 수 있다
  
  Acceptance Criteria:
    - [ ] 태블릿에서 현장에서 직접 입력 가능
    - [ ] 고해상도 이미지 업로드 지원
    - [ ] AI가 상태를 자동 분석
    - [ ] 과거 처리 이력을 타임라인으로 확인 가능

US-003:
  As a: Educator
  I want to: 교육 프로그램 참여자를 쉽게 관리하고 싶다
  So that: 행정 업무 시간을 줄이고 교육 콘텐츠 개발에 집중할 수 있다
  
  Acceptance Criteria:
    - [ ] 온라인 신청 폼 자동 생성
    - [ ] 참여자 명단 자동 관리
    - [ ] 이메일/SMS 자동 발송
    - [ ] 피드백 자동 수집 및 분석
```

---

## Document Metadata

- **Version**: 1.0.0
- **Last Updated**: 2025-01-22
- **Next Review**: 2025-02-22
- **Owner**: Nam Hyun-woo (남현우 교수)
- **Reviewers**: UX Team, Development Team
- **Confidentiality**: Internal Use Only

---

**End of Document 3: Interaction Flow & User Scenario Blueprint**
