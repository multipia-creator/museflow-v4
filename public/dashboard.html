<!DOCTYPE html>
<html lang="ko" id="html-root">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="version" content="4.9.1">
    <title>Dashboard - MuseFlow</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/static/js/tracker.js?v=4.0.0"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --museum-purple: #8b5cf6;
            --museum-pink: #ec4899;
            --museum-gold: #f59e0b;
            --urgent: #ef4444;
            --warning: #f59e0b;
            --success: #10b981;
            --info: #3b82f6;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #000000 0%, #0a0a0f 50%, #000000 100%);
            color: #f5f5f7;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }
        
        /* Navigation - Landing Page Style */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(15, 10, 31, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .navbar.scrolled {
            background: rgba(15, 10, 31, 0.95);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            text-decoration: none;
        }
        
        .nav-logo img {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: transparent;
            mix-blend-mode: screen;
            filter: brightness(1.2) contrast(1.1);
        }
        
        .nav-logo-text {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
            align-items: center;
        }
        
        .nav-links a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
            position: relative;
        }
        
        .nav-links a:hover {
            color: #8b5cf6;
        }
        
        .nav-links a.active {
            color: #8b5cf6;
            font-weight: 600;
        }
        
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            transition: width 0.3s ease;
        }
        
        .nav-links a:hover::after,
        .nav-links a.active::after {
            width: 100%;
        }
        
        .nav-icon-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .nav-icon-btn:hover {
            background: rgba(139, 92, 246, 0.2);
            border-color: rgba(139, 92, 246, 0.5);
            transform: translateY(-2px);
        }
        
        /* Glass Card */
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: saturate(180%) blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at top right, rgba(139, 92, 246, 0.15), transparent 70%);
            opacity: 0;
            transition: opacity 0.4s ease;
            pointer-events: none;
        }
        
        .glass-card:hover::before {
            opacity: 1;
        }
        
        .glass-card:hover {
            transform: translateY(-8px) scale(1.01);
            box-shadow: 0 24px 70px rgba(139, 92, 246, 0.5);
            border-color: rgba(139, 92, 246, 0.4);
        }
        
        /* Hero Section - Today's Mission */
        .hero-mission {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(236, 72, 153, 0.2));
            border: 2px solid rgba(139, 92, 246, 0.5);
            border-radius: 32px;
            padding: 3rem;
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
        }
        
        .hero-mission::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(139, 92, 246, 0.3) 0%, transparent 70%);
            animation: pulse 3s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
        }
        
        .hero-title {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }
        
        .dday-counter {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(220, 38, 38, 0.2));
            border: 2px solid rgba(239, 68, 68, 0.5);
            border-radius: 16px;
            padding: 1rem 1.5rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: #fca5a5;
            animation: pulse-dday 2s ease-in-out infinite;
        }
        
        @keyframes pulse-dday {
            0%, 100% { transform: scale(1); box-shadow: 0 0 20px rgba(239, 68, 68, 0.3); }
            50% { transform: scale(1.05); box-shadow: 0 0 40px rgba(239, 68, 68, 0.6); }
        }
        
        /* Urgent Alerts */
        .alert-card {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(220, 38, 38, 0.1));
            border: 2px solid rgba(239, 68, 68, 0.3);
            border-radius: 20px;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .alert-card:hover {
            transform: translateX(8px);
            border-color: rgba(239, 68, 68, 0.6);
            box-shadow: 0 8px 24px rgba(239, 68, 68, 0.3);
        }
        
        .alert-icon {
            width: 48px;
            height: 48px;
            background: rgba(239, 68, 68, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #fca5a5;
        }
        
        /* Timeline */
        .timeline-container {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            padding: 1rem 0;
            scrollbar-width: thin;
            scrollbar-color: rgba(139, 92, 246, 0.5) rgba(255, 255, 255, 0.1);
        }
        
        .timeline-container::-webkit-scrollbar {
            height: 8px;
        }
        
        .timeline-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }
        
        .timeline-container::-webkit-scrollbar-thumb {
            background: rgba(139, 92, 246, 0.5);
            border-radius: 4px;
        }
        
        .timeline-day {
            flex: 0 0 auto;
            width: 200px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .timeline-day:hover {
            transform: translateY(-4px);
            border-color: rgba(139, 92, 246, 0.5);
        }
        
        .timeline-day.today {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(236, 72, 153, 0.2));
            border: 2px solid rgba(139, 92, 246, 0.5);
        }
        
        .day-header {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 0.5rem;
        }
        
        .day-date {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .day-event {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }
        
        /* Exhibition Cards */
        .exhibition-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        
        .exhibition-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 60px rgba(139, 92, 246, 0.4);
            border-color: rgba(139, 92, 246, 0.5);
        }
        
        .card-thumbnail {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(236, 72, 153, 0.3));
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .card-thumbnail::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 30% 50%, rgba(139, 92, 246, 0.4), transparent 70%);
            animation: shimmer 3s ease-in-out infinite;
        }
        
        @keyframes shimmer {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        
        .card-icon {
            font-size: 4rem;
            opacity: 0.4;
            position: relative;
            z-index: 1;
        }
        
        .card-content {
            padding: 1.5rem;
        }
        
        .card-type {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 100px;
            font-size: 0.875rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .type-permanent {
            background: linear-gradient(135deg, #6366f1, #4f46e5);
            color: white;
        }
        
        .type-special {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }
        
        .type-traveling {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        
        .type-event {
            background: linear-gradient(135deg, #ec4899, #db2777);
            color: white;
        }
        
        .progress-ring {
            width: 80px;
            height: 80px;
            transform: rotate(-90deg);
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.6s ease;
        }
        
        /* Quick Actions */
        .quick-action {
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .quick-action:hover {
            background: rgba(139, 92, 246, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(139, 92, 246, 0.3);
        }
        
        /* Team Activity */
        .activity-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            margin-bottom: 0.75rem;
            transition: all 0.3s ease;
        }
        
        .activity-item:hover {
            background: rgba(255, 255, 255, 0.08);
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--museum-purple), var(--museum-pink));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
        }
        
        /* Museum Module Cards */
        .module-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 2.5rem;
            display: flex;
            gap: 1.5rem;
            align-items: flex-start;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .module-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(236, 72, 153, 0.08));
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        
        .module-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: rgba(139, 92, 246, 0.5);
            box-shadow: 0 24px 70px rgba(139, 92, 246, 0.4);
        }
        
        .module-card:hover::before {
            opacity: 1;
        }
        
        .module-card:active {
            transform: translateY(-6px) scale(1.01);
        }
        
        .module-icon {
            width: 80px;
            height: 80px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            flex-shrink: 0;
            position: relative;
            z-index: 1;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .module-content {
            flex: 1;
            position: relative;
            z-index: 1;
        }
        
        .module-title {
            font-size: 1.375rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.5rem;
        }
        
        .module-description {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 1rem;
            line-height: 1.5;
        }
        
        .module-stats {
            display: flex;
            gap: 1.5rem;
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }
        
        .stat-label {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.5);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
        }
        
        .module-arrow {
            position: relative;
            z-index: 1;
            color: rgba(255, 255, 255, 0.3);
            font-size: 1.5rem;
            transition: all 0.3s;
        }
        
        .module-card:hover .module-arrow {
            color: white;
            transform: translateX(4px);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .hero-title { font-size: 2rem; }
            .hero-mission { padding: 2rem; }
            .timeline-day { width: 150px; }
            
            .module-card {
                padding: 1.5rem;
            }
            
            .module-icon {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
        }
    </style>
    
    <!-- PWA Configuration -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#8b5cf6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="MuseFlow">
    <link rel="apple-touch-icon" href="/static/images/logo-neon-m.png">
</head>
<body>
    <!-- Navigation - Landing Page Style -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a href="/landing.html" class="nav-logo">
                <img src="/static/images/logo-neon-m.png" alt="MuseFlow" style="box-shadow: 0 0 20px rgba(139, 92, 246, 0.6);">
                <span class="nav-logo-text">MuseFlow.life</span>
            </a>
            
            <ul class="nav-links" id="nav-links">
                <li><a href="/landing.html"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="/dashboard.html" class="active"><i class="fas fa-chart-line"></i> Dashboard</a></li>
                <li style="position: relative;" class="canvas-menu">
                    <a href="#" onclick="event.preventDefault(); toggleCanvasMenu()" style="display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-project-diagram"></i> Canvas <i class="fas fa-chevron-down" style="font-size: 0.75rem;"></i>
                    </a>
                    <div id="canvas-dropdown" style="display: none; position: absolute; top: 100%; left: 0; background: rgba(10, 10, 15, 0.98); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 0.5rem 0; margin-top: 0.5rem; min-width: 200px; z-index: 1000; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);">
                        <a href="/canvas.html" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: all 0.2s;" onmouseover="this.style.background='rgba(139, 92, 246, 0.1)'; this.style.color='#fff'" onmouseout="this.style.background='transparent'; this.style.color='rgba(255, 255, 255, 0.8)'">
                            <i class="fas fa-tasks" style="width: 20px;"></i>
                            <div>
                                <div style="font-weight: 500;">Tasks</div>
                                <div style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.5);">Kanban ë³´ë“œ</div>
                            </div>
                        </a>
                        <a href="/workflow.html" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: all 0.2s;" onmouseover="this.style.background='rgba(139, 92, 246, 0.1)'; this.style.color='#fff'" onmouseout="this.style.background='transparent'; this.style.color='rgba(255, 255, 255, 0.8)'">
                            <i class="fas fa-project-diagram" style="width: 20px;"></i>
                            <div>
                                <div style="font-weight: 500;">Workflow</div>
                                <div style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.5);">ë…¸ë“œ ì—ë””í„°</div>
                            </div>
                        </a>
                    </div>
                </li>
            </ul>
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <select id="lang-select" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.3); padding: 0.5rem 1rem; border-radius: 12px; color: white; cursor: pointer; font-weight: 500;">
                    <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                    <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                </select>
                
                <button id="notification-btn" class="nav-icon-btn" onclick="toggleNotificationPanel()" style="position: relative;">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge" style="display: none;">0</span>
                </button>
                <div id="notification-panel" class="notification-panel" style="display: none; position: absolute; top: 100%; right: 0; margin-top: 0.5rem; z-index: 1001;"></div>
                
                <a href="/account.html" class="nav-icon-btn" title="ë‚´ ê³„ì •">
                    <i class="fas fa-user"></i>
                    <span>ê³„ì •</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div style="max-width: 1600px; margin: 0 auto; padding: 6rem 2rem 3rem 2rem;">
        
        <!-- Hero Section - Today's Mission -->
        <section class="hero-mission" id="hero-mission">
            <div class="hero-content">
                <div class="hero-title">ğŸ¯ ì˜¤ëŠ˜ì˜ ë¯¸ì…˜</div>
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 2rem;">
                    <div style="flex: 1; min-width: 300px;">
                        <h2 id="mission-title" style="font-size: 2rem; font-weight: 700; margin-bottom: 1rem; color: white;">
                            ë¡œë”© ì¤‘...
                        </h2>
                        <div id="mission-dday"></div>
                        <div style="display: flex; gap: 1rem; margin-top: 2rem; flex-wrap: wrap;">
                            <button class="quick-action" onclick="viewMission()">
                                <i class="fas fa-eye"></i> ìƒì„¸ ë³´ê¸°
                            </button>
                            <button class="quick-action" onclick="openChecklist()">
                                <i class="fas fa-tasks"></i> ì²´í¬ë¦¬ìŠ¤íŠ¸
                            </button>
                            <button class="quick-action" onclick="contactTeam()">
                                <i class="fas fa-comments"></i> íŒ€ ì±„íŒ…
                            </button>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 2rem;">
                        <div id="mission-progress" style="position: relative;">
                            <!-- Progress ring will be inserted here -->
                        </div>
                        <div>
                            <div id="mission-stats" style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.8);">
                                <!-- Stats will be inserted here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Urgent Alerts -->
        <section style="margin-bottom: 3rem;" id="urgent-alerts-section">
            <h2 style="font-size: 1.75rem; font-weight: 700; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
                <i class="fas fa-exclamation-triangle" style="color: var(--urgent);"></i>
                ê¸´ê¸‰ ì•Œë¦¼
            </h2>
            <div id="urgent-alerts">
                <!-- Alerts will be dynamically inserted -->
            </div>
        </section>

        <!-- Week Timeline -->
        <section style="margin-bottom: 3rem;">
            <h2 style="font-size: 1.75rem; font-weight: 700; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
                <i class="fas fa-calendar-week" style="color: var(--museum-purple);"></i>
                ì´ë²ˆ ì£¼ ì¼ì •
            </h2>
            <div class="timeline-container" id="week-timeline">
                <!-- Timeline days will be dynamically inserted -->
            </div>
        </section>

        <!-- Exhibition Cards Grid -->
        <section style="margin-bottom: 3rem;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="font-size: 1.75rem; font-weight: 700; display: flex; align-items: center; gap: 0.75rem;">
                    <i class="fas fa-museum" style="color: var(--museum-gold);"></i>
                    ì§„í–‰ ì¤‘ì¸ ì „ì‹œ
                </h2>
                <select id="exhibition-filter" style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.15); padding: 0.75rem 1.25rem; border-radius: 12px; color: white; cursor: pointer;">
                    <option value="all">ì „ì²´ ì „ì‹œ</option>
                    <option value="permanent">ìƒì„¤ì „</option>
                    <option value="special">íŠ¹ë³„ì „</option>
                    <option value="traveling">ìˆœíšŒì „</option>
                    <option value="event">ê¸°íšì „</option>
                </select>
            </div>
            <div id="exhibitions-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(380px, 1fr)); gap: 1.5rem;">
                <!-- Exhibition cards will be dynamically inserted -->
            </div>
        </section>

        <!-- Museum Modules Section -->
        <section style="margin-bottom: 3rem;">
            <h2 style="font-size: 1.75rem; font-weight: 700; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
                <i class="fas fa-layer-group" style="color: var(--museum-purple);"></i>
                ë°•ë¬¼ê´€ ì—…ë¬´ ëª¨ë“ˆ
            </h2>
            <div id="museum-modules-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 1.5rem;">
                <!-- Module 1: Exhibition (ì „ì‹œ) -->
                <div class="module-card" data-module="exhibition" onclick="openModuleCanvas('exhibition')">
                    <div class="module-icon" style="background: linear-gradient(135deg, #8b5cf6, #a78bfa);">
                        <i class="fas fa-palette"></i>
                    </div>
                    <div class="module-content">
                        <h3 class="module-title">ì „ì‹œ ê´€ë¦¬</h3>
                        <p class="module-description">ì „ì‹œ ê¸°íš, ì„¤ì¹˜, ìš´ì˜ ë° í‰ê°€</p>
                        <div class="module-stats">
                            <div class="stat-item">
                                <span class="stat-label">ì›Œí¬í”Œë¡œìš°</span>
                                <span class="stat-value" id="exhibition-workflows">15</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">í™œì„± í”„ë¡œì íŠ¸</span>
                                <span class="stat-value" id="exhibition-active">0</span>
                            </div>
                        </div>
                    </div>
                    <div class="module-arrow">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </div>

                <!-- Module 2: Education (êµìœ¡) -->
                <div class="module-card" data-module="education" onclick="openModuleCanvas('education')">
                    <div class="module-icon" style="background: linear-gradient(135deg, #06b6d4, #22d3ee);">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="module-content">
                        <h3 class="module-title">êµìœ¡ í”„ë¡œê·¸ë¨</h3>
                        <p class="module-description">êµìœ¡ í”„ë¡œê·¸ë¨ ê°œë°œ, ì‹¤í–‰ ë° í‰ê°€</p>
                        <div class="module-stats">
                            <div class="stat-item">
                                <span class="stat-label">ì›Œí¬í”Œë¡œìš°</span>
                                <span class="stat-value" id="education-workflows">15</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">í™œì„± í”„ë¡œì íŠ¸</span>
                                <span class="stat-value" id="education-active">0</span>
                            </div>
                        </div>
                    </div>
                    <div class="module-arrow">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </div>

                <!-- Module 3: Archive (ìˆ˜ì§‘/ë³´ì¡´) -->
                <div class="module-card" data-module="archive" onclick="openModuleCanvas('archive')">
                    <div class="module-icon" style="background: linear-gradient(135deg, #10b981, #34d399);">
                        <i class="fas fa-archive"></i>
                    </div>
                    <div class="module-content">
                        <h3 class="module-title">ìˆ˜ì§‘ & ë³´ì¡´</h3>
                        <p class="module-description">ìœ ë¬¼ ìˆ˜ì§‘, ë“±ë¡, ë³´ì¡´ ë° ê´€ë¦¬</p>
                        <div class="module-stats">
                            <div class="stat-item">
                                <span class="stat-label">ì›Œí¬í”Œë¡œìš°</span>
                                <span class="stat-value" id="archive-workflows">15</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">í™œì„± í”„ë¡œì íŠ¸</span>
                                <span class="stat-value" id="archive-active">0</span>
                            </div>
                        </div>
                    </div>
                    <div class="module-arrow">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </div>

                <!-- Module 4: Publication (ì¶œíŒ) -->
                <div class="module-card" data-module="publication" onclick="openModuleCanvas('publication')">
                    <div class="module-icon" style="background: linear-gradient(135deg, #f59e0b, #fbbf24);">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="module-content">
                        <h3 class="module-title">ì¶œíŒ & ì½˜í…ì¸ </h3>
                        <p class="module-description">ë„ë¡, ë‰´ìŠ¤ë ˆí„°, ë””ì§€í„¸ ì½˜í…ì¸  ì œì‘</p>
                        <div class="module-stats">
                            <div class="stat-item">
                                <span class="stat-label">ì›Œí¬í”Œë¡œìš°</span>
                                <span class="stat-value" id="publication-workflows">12</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">í™œì„± í”„ë¡œì íŠ¸</span>
                                <span class="stat-value" id="publication-active">0</span>
                            </div>
                        </div>
                    </div>
                    <div class="module-arrow">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </div>

                <!-- Module 5: Research (ì—°êµ¬) -->
                <div class="module-card" data-module="research" onclick="openModuleCanvas('research')">
                    <div class="module-icon" style="background: linear-gradient(135deg, #ec4899, #f472b6);">
                        <i class="fas fa-microscope"></i>
                    </div>
                    <div class="module-content">
                        <h3 class="module-title">ì—°êµ¬ & ì¡°ì‚¬</h3>
                        <p class="module-description">í•™ìˆ  ì—°êµ¬, í˜„ì¥ ì¡°ì‚¬ ë° ë³´ê³ ì„œ ì‘ì„±</p>
                        <div class="module-stats">
                            <div class="stat-item">
                                <span class="stat-label">ì›Œí¬í”Œë¡œìš°</span>
                                <span class="stat-value" id="research-workflows">12</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">í™œì„± í”„ë¡œì íŠ¸</span>
                                <span class="stat-value" id="research-active">0</span>
                            </div>
                        </div>
                    </div>
                    <div class="module-arrow">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </div>

                <!-- Module 6: Admin (í–‰ì •) -->
                <div class="module-card" data-module="admin" onclick="openModuleCanvas('admin')">
                    <div class="module-icon" style="background: linear-gradient(135deg, #6366f1, #818cf8);">
                        <i class="fas fa-building"></i>
                    </div>
                    <div class="module-content">
                        <h3 class="module-title">í–‰ì • & ìš´ì˜</h3>
                        <p class="module-description">ì˜ˆì‚°, ì¸ì‚¬, ì‹œì„¤ ê´€ë¦¬ ë° ì „ëµ ê¸°íš</p>
                        <div class="module-stats">
                            <div class="stat-item">
                                <span class="stat-label">ì›Œí¬í”Œë¡œìš°</span>
                                <span class="stat-value" id="admin-workflows">19</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">í™œì„± í”„ë¡œì íŠ¸</span>
                                <span class="stat-value" id="admin-active">0</span>
                            </div>
                        </div>
                    </div>
                    <div class="module-arrow">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </div>
            </div>
        </section>

        <!-- Analytics Charts -->
        <section style="margin-bottom: 3rem;">
            <h2 style="font-size: 1.75rem; font-weight: 700; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
                <i class="fas fa-chart-line" style="color: var(--museum-purple);"></i>
                ë°ì´í„° ë¶„ì„
            </h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(500px, 1fr)); gap: 1.5rem;">
                <!-- Chart 1: Monthly Trend -->
                <div class="glass-card">
                    <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-chart-line" style="color: #8b5cf6;"></i>
                        ì›”ë³„ ì „ì‹œ íŠ¸ë Œë“œ
                    </h3>
                    <canvas id="monthlyTrendChart" style="max-height: 250px;"></canvas>
                </div>
                
                <!-- Chart 2: Type Distribution -->
                <div class="glass-card">
                    <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-chart-pie" style="color: #ec4899;"></i>
                        ì „ì‹œ ìœ í˜• ë¶„í¬
                    </h3>
                    <canvas id="typeDistributionChart" style="max-height: 250px;"></canvas>
                </div>
                
                <!-- Chart 3: Budget Usage -->
                <div class="glass-card">
                    <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-chart-bar" style="color: #f59e0b;"></i>
                        ì˜ˆì‚° ì‚¬ìš© í˜„í™©
                    </h3>
                    <canvas id="budgetChart" style="max-height: 250px;"></canvas>
                </div>
                
                <!-- Chart 4: Phase Distribution -->
                <div class="glass-card">
                    <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-tasks" style="color: #10b981;"></i>
                        ì§„í–‰ ë‹¨ê³„ ë¶„í¬
                    </h3>
                    <canvas id="phaseDistributionChart" style="max-height: 250px;"></canvas>
                </div>
            </div>
        </section>

        <!-- Exhibition Insights -->
        <section style="margin-bottom: 3rem;">
            <h2 style="font-size: 1.75rem; font-weight: 700; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
                <i class="fas fa-lightbulb" style="color: #fbbf24;"></i>
                ì „ì‹œ ì¸ì‚¬ì´íŠ¸
            </h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 1.5rem;">
                <!-- Insight 1: Most Active Exhibition -->
                <div class="glass-card" style="padding: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-fire" style="font-size: 1.5rem;"></i>
                        </div>
                        <div>
                            <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">ê°€ì¥ í™œë°œí•œ ì „ì‹œ</div>
                            <div style="font-size: 1.25rem; font-weight: 700;" id="insight-most-active">-</div>
                        </div>
                    </div>
                    <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.6);" id="insight-most-active-desc">ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</div>
                </div>

                <!-- Insight 2: Urgent Attention -->
                <div class="glass-card" style="padding: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-exclamation-triangle" style="font-size: 1.5rem;"></i>
                        </div>
                        <div>
                            <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">ì£¼ì˜ í•„ìš”</div>
                            <div style="font-size: 1.25rem; font-weight: 700; color: #f5576c;" id="insight-urgent-count">0</div>
                        </div>
                    </div>
                    <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.6);" id="insight-urgent-desc">ë§ˆê° ì„ë°• ë˜ëŠ” ì˜ˆì‚° ì´ˆê³¼ ì „ì‹œ</div>
                </div>

                <!-- Insight 3: Budget Status -->
                <div class="glass-card" style="padding: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-won-sign" style="font-size: 1.5rem;"></i>
                        </div>
                        <div>
                            <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">ì „ì²´ ì˜ˆì‚° í˜„í™©</div>
                            <div style="font-size: 1.25rem; font-weight: 700;" id="insight-budget-total">0ì–µì›</div>
                        </div>
                    </div>
                    <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.6);">
                        <span id="insight-budget-used">0ì–µì›</span> ì§‘í–‰ (<span id="insight-budget-rate">0%</span>)
                    </div>
                </div>

                <!-- Insight 4: Upcoming Events -->
                <div class="glass-card" style="padding: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-calendar-alt" style="font-size: 1.5rem;"></i>
                        </div>
                        <div>
                            <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">ì´ë²ˆ ì£¼ ì¼ì •</div>
                            <div style="font-size: 1.25rem; font-weight: 700;" id="insight-upcoming-count">0</div>
                        </div>
                    </div>
                    <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.6);" id="insight-upcoming-desc">ë‹¤ê°€ì˜¤ëŠ” ì „ì‹œ ë° ì‘ì—…</div>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section style="margin-bottom: 3rem;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="font-size: 1.75rem; font-weight: 700; display: flex; align-items: center; gap: 0.75rem;">
                    <i class="fas fa-folder-open" style="color: var(--museum-pink);"></i>
                    ì „ì‹œ ê´€ë¦¬
                </h2>
                <button class="btn-primary" onclick="openCreateModal()" style="background: linear-gradient(135deg, #8b5cf6, #ec4899); border: none; padding: 0.75rem 1.5rem; border-radius: 12px; color: white; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-plus"></i>
                    ìƒˆ ì „ì‹œ ë§Œë“¤ê¸°
                </button>
            </div>
            
            <!-- Stats Cards -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                <div class="glass-card" style="padding: 1.5rem; text-align: center;">
                    <div style="font-size: 2rem; font-weight: 700; color: #a78bfa; margin-bottom: 0.5rem;" id="stat-total">0</div>
                    <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">ì „ì²´ ì „ì‹œ</div>
                </div>
                <div class="glass-card" style="padding: 1.5rem; text-align: center;">
                    <div style="font-size: 2rem; font-weight: 700; color: #f9a8d4; margin-bottom: 0.5rem;" id="stat-active">0</div>
                    <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">ì§„í–‰ ì¤‘</div>
                </div>
                <div class="glass-card" style="padding: 1.5rem; text-align: center;">
                    <div style="font-size: 2rem; font-weight: 700; color: #fcd34d; margin-bottom: 0.5rem;" id="stat-urgent">0</div>
                    <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">ê¸´ê¸‰ (D-7)</div>
                </div>
                <div class="glass-card" style="padding: 1.5rem; text-align: center;">
                    <div style="font-size: 2rem; font-weight: 700; color: #6ee7b7; margin-bottom: 0.5rem;" id="stat-completed">0</div>
                    <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">ì™„ë£Œ</div>
                </div>
            </div>
            
            <!-- Filters -->
            <div style="display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap;">
                <input type="text" placeholder="ğŸ” ì „ì‹œ ê²€ìƒ‰..." id="search-input" style="flex: 1; min-width: 250px; padding: 0.75rem 1rem; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; color: white; font-size: 0.875rem;">
                <select id="type-filter" style="padding: 0.75rem 1rem; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; color: white; cursor: pointer;">
                    <option value="all">ì „ì²´ ìœ í˜•</option>
                    <option value="permanent">ğŸ›ï¸ ìƒì„¤ì „</option>
                    <option value="special">âœ¨ íŠ¹ë³„ì „</option>
                    <option value="traveling">ğŸšŒ ìˆœíšŒì „</option>
                    <option value="event">ğŸ­ ê¸°íšì „</option>
                </select>
                <select id="phase-filter" style="padding: 0.75rem 1rem; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; color: white; cursor: pointer;">
                    <option value="all">ì „ì²´ ë‹¨ê³„</option>
                    <option value="planning">ğŸ’¡ ê¸°íš</option>
                    <option value="preparation">ğŸ”§ ì¤€ë¹„</option>
                    <option value="execution">ğŸš€ ì§„í–‰</option>
                    <option value="marketing">ğŸ“¢ í™ë³´</option>
                    <option value="completed">âœ… ì™„ë£Œ</option>
                </select>
                <select id="sort-select" style="padding: 0.75rem 1rem; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; color: white; cursor: pointer;">
                    <option value="updated">ìµœê·¼ ìˆ˜ì •ìˆœ</option>
                    <option value="dday">D-Day ìˆœ</option>
                    <option value="title">ì œëª©ìˆœ</option>
                </select>
            </div>
            
            <!-- Projects Grid -->
            <div id="projects-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 1.5rem;">
                <!-- Projects will be rendered here -->
            </div>
        </section>

        <!-- Team Activity -->
        <section class="glass-card" style="margin-bottom: 3rem;">
            <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
                <i class="fas fa-users" style="color: var(--info);"></i>
                íŒ€ í™œë™
            </h2>
            <div id="team-activity">
                <!-- Team activity feed will be dynamically inserted -->
            </div>
        </section>

        <!-- Performance Metrics -->
        <section style="margin-bottom: 3rem;">
            <h2 style="font-size: 1.75rem; font-weight: 700; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
                <i class="fas fa-chart-bar" style="color: var(--museum-gold);"></i>
                ì„±ê³¼ ì§€í‘œ
            </h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
                <!-- Metric 1: Task Completion Rate -->
                <div class="glass-card" style="text-align: center; padding: 2rem;">
                    <div style="font-size: 3rem; margin-bottom: 0.5rem;" id="metric-completion">
                        <i class="fas fa-tasks" style="color: #10b981;"></i>
                    </div>
                    <div style="font-size: 2.5rem; font-weight: 700; margin-bottom: 0.5rem; color: #10b981;" id="metric-completion-value">78%</div>
                    <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">ì‘ì—… ì™„ë£Œìœ¨</div>
                    <div style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.5); margin-top: 0.5rem;">ì§€ë‚œì£¼ ëŒ€ë¹„ +5%</div>
                </div>

                <!-- Metric 2: Team Productivity -->
                <div class="glass-card" style="text-align: center; padding: 2rem;">
                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">
                        <i class="fas fa-clock" style="color: #8b5cf6;"></i>
                    </div>
                    <div style="font-size: 2.5rem; font-weight: 700; margin-bottom: 0.5rem; color: #8b5cf6;" id="metric-productivity-value">24</div>
                    <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">í‰ê·  ì‘ì—… ì‹œê°„ (ì‹œê°„)</div>
                    <div style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.5); margin-top: 0.5rem;">ì‘ì—…ë‹¹ í‰ê·  ì†Œìš”</div>
                </div>

                <!-- Metric 3: Budget Efficiency -->
                <div class="glass-card" style="text-align: center; padding: 2rem;">
                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">
                        <i class="fas fa-won-sign" style="color: #f59e0b;"></i>
                    </div>
                    <div style="font-size: 2.5rem; font-weight: 700; margin-bottom: 0.5rem; color: #f59e0b;" id="metric-budget-value">66%</div>
                    <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">ì˜ˆì‚° ì§‘í–‰ë¥ </div>
                    <div style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.5); margin-top: 0.5rem;">ì´ 680M ì¤‘ 450M ì‚¬ìš©</div>
                </div>

                <!-- Metric 4: Team Collaboration -->
                <div class="glass-card" style="text-align: center; padding: 2rem;">
                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">
                        <i class="fas fa-comments" style="color: #ec4899;"></i>
                    </div>
                    <div style="font-size: 2.5rem; font-weight: 700; margin-bottom: 0.5rem; color: #ec4899;" id="metric-collaboration-value">156</div>
                    <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">íŒ€ í˜‘ì—… í™œë™</div>
                    <div style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.5); margin-top: 0.5rem;">ì´ë²ˆ ì£¼ ëŒ“ê¸€ & ì—…ë°ì´íŠ¸</div>
                </div>
            </div>
        </section>

        <!-- Top Contributors -->
        <section class="glass-card">
            <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
                <i class="fas fa-trophy" style="color: var(--museum-gold);"></i>
                ì´ë²ˆ ì£¼ ìš°ìˆ˜ ê¸°ì—¬ì
            </h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                <div style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.05)); padding: 1.5rem; border-radius: 16px; border: 2px solid rgba(245, 158, 11, 0.3);">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #f59e0b, #fb923c); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: 700;">ğŸ¥‡</div>
                        <div>
                            <div style="font-weight: 700; font-size: 1.125rem;">ê¹€íë ˆì´í„°</div>
                            <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">ìˆ˜ì„ íë ˆì´í„°</div>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.875rem;">
                        <span>ì™„ë£Œ ì‘ì—…: <strong>8ê°œ</strong></span>
                        <span>ê¸°ì—¬ë„: <strong style="color: #f59e0b;">92%</strong></span>
                    </div>
                </div>

                <div style="background: rgba(192, 192, 192, 0.1); padding: 1.5rem; border-radius: 16px; border: 2px solid rgba(192, 192, 192, 0.3);">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #c0c0c0, #9ca3af); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: 700;">ğŸ¥ˆ</div>
                        <div>
                            <div style="font-weight: 700; font-size: 1.125rem;">ì´í•™ì˜ˆì‚¬</div>
                            <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">í•™ì˜ˆì—°êµ¬ì‚¬</div>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.875rem;">
                        <span>ì™„ë£Œ ì‘ì—…: <strong>6ê°œ</strong></span>
                        <span>ê¸°ì—¬ë„: <strong style="color: #9ca3af;">85%</strong></span>
                    </div>
                </div>

                <div style="background: rgba(205, 127, 50, 0.1); padding: 1.5rem; border-radius: 16px; border: 2px solid rgba(205, 127, 50, 0.3);">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #cd7f32, #92400e); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: 700;">ğŸ¥‰</div>
                        <div>
                            <div style="font-weight: 700; font-size: 1.125rem;">ë°•ë””ìì´ë„ˆ</div>
                            <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">ì „ì‹œ ë””ìì´ë„ˆ</div>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.875rem;">
                        <span>ì™„ë£Œ ì‘ì—…: <strong>5ê°œ</strong></span>
                        <span>ê¸°ì—¬ë„: <strong style="color: #cd7f32;">78%</strong></span>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // API Base URL (already defined by tracker.js, no need to redeclare)
        // Use the global API_BASE_URL from tracker.js
        
        // Authentication (Demo mode - bypass for sample data visualization)
        let token = localStorage.getItem('authToken');
        if (!token) {
            // Demo mode: create a dummy token for visualization testing
            token = 'demo-token-12345';
            localStorage.setItem('authToken', token);
            console.log('ğŸ¨ Demo mode activated for data visualization');
        }
        
        // Language
        let currentLang = localStorage.getItem('museflow_language') || 'ko';
        document.getElementById('lang-select').value = currentLang;
        
        // Data
        let allProjects = [];
        
        // Calculate D-Day
        function calculateDDay(endDate) {
            if (!endDate) return null;
            const now = new Date();
            const end = new Date(endDate);
            const diff = Math.ceil((end - now) / (1000 * 60 * 60 * 24));
            return diff;
        }
        
        // Render Progress Ring
        function renderProgressRing(percentage) {
            const radius = 32;
            const circumference = 2 * Math.PI * radius;
            const offset = circumference - (percentage / 100) * circumference;
            
            let color = '#10b981';
            if (percentage < 40) color = '#ef4444';
            else if (percentage < 70) color = '#f59e0b';
            
            return `
                <svg class="progress-ring" width="80" height="80">
                    <circle
                        cx="40"
                        cy="40"
                        r="${radius}"
                        stroke="rgba(255, 255, 255, 0.1)"
                        stroke-width="8"
                        fill="none"
                    />
                    <circle
                        class="progress-ring-circle"
                        cx="40"
                        cy="40"
                        r="${radius}"
                        stroke="${color}"
                        stroke-width="8"
                        fill="none"
                        stroke-dasharray="${circumference}"
                        stroke-dashoffset="${offset}"
                        stroke-linecap="round"
                    />
                    <text x="40" y="45" text-anchor="middle" font-size="18" font-weight="700" fill="white">
                        ${percentage}%
                    </text>
                </svg>
            `;
        }
        
        // Render Hero Mission
        function renderHeroMission() {
            const urgentProjects = allProjects
                .filter(p => {
                    const dday = calculateDDay(p.end_date);
                    return dday !== null && dday >= 0 && dday <= 14 && p.status === 'active';
                })
                .sort((a, b) => calculateDDay(a.end_date) - calculateDDay(b.end_date));
            
            if (urgentProjects.length === 0) {
                document.getElementById('mission-title').textContent = 'ëª¨ë“  ì¼ì •ì´ ìˆœì¡°ë¡­ìŠµë‹ˆë‹¤! ğŸ‰';
                document.getElementById('mission-dday').innerHTML = '';
                document.getElementById('mission-progress').innerHTML = renderProgressRing(100);
                document.getElementById('mission-stats').innerHTML = '<div>âœ… ê¸´ê¸‰í•œ ì „ì‹œê°€ ì—†ìŠµë‹ˆë‹¤</div>';
                return;
            }
            
            const topMission = urgentProjects[0];
            const dday = calculateDDay(topMission.end_date);
            
            document.getElementById('mission-title').textContent = topMission.title;
            
            const ddayHTML = dday === 0 
                ? '<span class="dday-counter">ğŸš¨ D-Day</span>'
                : `<span class="dday-counter">ğŸš¨ D-${dday}</span>`;
            document.getElementById('mission-dday').innerHTML = ddayHTML;
            
            // Calculate progress based on phase
            const phaseProgress = {
                'planning': 20,
                'preparation': 40,
                'execution': 60,
                'marketing': 80,
                'completed': 100
            };
            const progress = phaseProgress[topMission.phase] || 0;
            document.getElementById('mission-progress').innerHTML = renderProgressRing(progress);
            
            const budgetPercent = topMission.budget_total > 0 
                ? ((topMission.budget_used / topMission.budget_total) * 100).toFixed(0)
                : 0;
            
            document.getElementById('mission-stats').innerHTML = `
                <div style="margin-bottom: 0.5rem;">ğŸ“ ${topMission.location || 'ì¥ì†Œ ë¯¸ì •'}</div>
                <div style="margin-bottom: 0.5rem;">ğŸ‘¤ ${topMission.curator || 'ë‹´ë‹¹ì ë¯¸ì •'}</div>
                <div style="margin-bottom: 0.5rem;">ğŸ¨ ì‘í’ˆ ${topMission.artwork_count || 0}ì </div>
                <div>ğŸ’° ì˜ˆì‚° ${budgetPercent}% ì‚¬ìš©</div>
            `;
        }
        
        // Render Urgent Alerts
        function renderUrgentAlerts() {
            const alerts = [];
            
            allProjects.forEach(p => {
                const dday = calculateDDay(p.end_date);
                
                // D-7 alerts
                if (dday !== null && dday >= 0 && dday <= 7 && p.status === 'active') {
                    alerts.push({
                        type: 'dday',
                        severity: 'urgent',
                        icon: 'ğŸš¨',
                        message: `${p.title} - D-${dday === 0 ? 'Day' : dday}`,
                        action: () => window.location.href = `/canvas.html?project=${p.id}`
                    });
                }
                
                // Budget alerts
                if (p.budget_total > 0) {
                    const budgetPercent = (p.budget_used / p.budget_total) * 100;
                    if (budgetPercent >= 90) {
                        alerts.push({
                            type: 'budget',
                            severity: 'warning',
                            icon: 'ğŸ’°',
                            message: `${p.title} - ì˜ˆì‚° ${budgetPercent.toFixed(0)}% ì´ˆê³¼`,
                            action: () => window.location.href = `/projects.html`
                        });
                    }
                }
            });
            
            const container = document.getElementById('urgent-alerts');
            if (alerts.length === 0) {
                container.innerHTML = '<div style="color: rgba(255, 255, 255, 0.6); padding: 2rem; text-align: center;">âœ… ê¸´ê¸‰ ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤</div>';
                return;
            }
            
            container.innerHTML = alerts.map(alert => `
                <div class="alert-card" onclick='${alert.action.toString().replace(/'/g, "&apos;")}'>
                    <div class="alert-icon">${alert.icon}</div>
                    <div style="flex: 1;">
                        <div style="font-weight: 600; margin-bottom: 0.25rem;">${alert.message}</div>
                        <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">í´ë¦­í•˜ì—¬ ìì„¸íˆ ë³´ê¸°</div>
                    </div>
                    <i class="fas fa-chevron-right" style="color: rgba(255, 255, 255, 0.5);"></i>
                </div>
            `).join('');
        }
        
        // Render Week Timeline
        function renderWeekTimeline() {
            const container = document.getElementById('week-timeline');
            const days = [];
            const today = new Date();
            
            for (let i = 0; i < 7; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                
                const dayName = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '][date.getDay()];
                const isToday = i === 0;
                
                // Find events for this day
                const events = allProjects.filter(p => {
                    if (!p.start_date) return false;
                    const startDate = new Date(p.start_date);
                    return startDate.toDateString() === date.toDateString();
                });
                
                days.push(`
                    <div class="timeline-day ${isToday ? 'today' : ''}">
                        <div class="day-header">${dayName}ìš”ì¼ ${isToday ? '(ì˜¤ëŠ˜)' : ''}</div>
                        <div class="day-date">${date.getMonth() + 1}/${date.getDate()}</div>
                        ${events.length > 0 
                            ? events.map(e => `<div class="day-event">ğŸ“Œ ${e.title}</div>`).join('') 
                            : '<div style="color: rgba(255, 255, 255, 0.5); font-size: 0.875rem;">ì¼ì • ì—†ìŒ</div>'
                        }
                    </div>
                `);
            }
            
            container.innerHTML = days.join('');
        }
        
        // Render Exhibition Cards
        function renderExhibitions(filter = 'all') {
            const filtered = filter === 'all' 
                ? allProjects 
                : allProjects.filter(p => p.type === filter);
            
            const typeConfig = {
                permanent: { label: 'ìƒì„¤ì „', icon: 'ğŸ›ï¸', class: 'type-permanent' },
                special: { label: 'íŠ¹ë³„ì „', icon: 'âœ¨', class: 'type-special' },
                traveling: { label: 'ìˆœíšŒì „', icon: 'ğŸšŒ', class: 'type-traveling' },
                event: { label: 'ê¸°íšì „', icon: 'ğŸ­', class: 'type-event' }
            };
            
            const phaseProgress = {
                'planning': 20,
                'preparation': 40,
                'execution': 60,
                'marketing': 80,
                'completed': 100
            };
            
            const container = document.getElementById('exhibitions-grid');
            container.innerHTML = filtered.map(p => {
                const type = typeConfig[p.type] || typeConfig.permanent;
                const progress = phaseProgress[p.phase] || 0;
                const dday = calculateDDay(p.end_date);
                
                return `
                    <div class="exhibition-card" onclick="window.location.href='/canvas.html?project=${p.id}'">
                        <div class="card-thumbnail">
                            <div class="card-icon">${type.icon}</div>
                        </div>
                        <div class="card-content">
                            <span class="card-type ${type.class}">${type.icon} ${type.label}</span>
                            <h3 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.75rem;">${p.title}</h3>
                            <p style="color: rgba(255, 255, 255, 0.7); margin-bottom: 1rem; line-height: 1.6;">
                                ${p.description || 'ì„¤ëª… ì—†ìŒ'}
                            </p>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; font-size: 0.875rem; color: rgba(255, 255, 255, 0.8); margin-bottom: 1rem;">
                                ${p.location ? `<div><i class="fas fa-map-marker-alt"></i> ${p.location}</div>` : ''}
                                ${p.curator ? `<div><i class="fas fa-user-tie"></i> ${p.curator}</div>` : ''}
                                ${p.artwork_count ? `<div><i class="fas fa-palette"></i> ì‘í’ˆ ${p.artwork_count}ì </div>` : ''}
                                ${dday !== null && dday >= 0 ? `<div><i class="fas fa-calendar"></i> D-${dday}</div>` : ''}
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">
                                    ì§„í–‰ë¥ : ${progress}%
                                </div>
                                <div style="width: 100px; height: 8px; background: rgba(255, 255, 255, 0.1); border-radius: 100px; overflow: hidden;">
                                    <div style="width: ${progress}%; height: 100%; background: linear-gradient(90deg, #8b5cf6, #ec4899); border-radius: 100px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // Render Team Activity (Real Data from Tasks & Comments)
        async function renderTeamActivity() {
            try {
                // Get recent tasks (updated in last 7 days)
                const recentTasks = allProjects.flatMap(p => {
                    // Get tasks for this project
                    return [];
                }).filter(t => {
                    const updated = new Date(t.updated_at);
                    const now = new Date();
                    const diffDays = (now - updated) / (1000 * 60 * 60 * 24);
                    return diffDays <= 7;
                }).sort((a, b) => new Date(b.updated_at) - new Date(a.updated_at));
                
                // Generate activity feed from projects and tasks
                const activities = [];
                
                // Add project updates
                allProjects.slice(0, 3).forEach(p => {
                    const updated = new Date(p.updated_at);
                    const now = new Date();
                    const diffMs = now - updated;
                    const diffMins = Math.floor(diffMs / 60000);
                    const diffHours = Math.floor(diffMs / 3600000);
                    const diffDays = Math.floor(diffMs / 86400000);
                    
                    let timeStr = '';
                    if (diffMins < 60) timeStr = `${diffMins}ë¶„ ì „`;
                    else if (diffHours < 24) timeStr = `${diffHours}ì‹œê°„ ì „`;
                    else timeStr = `${diffDays}ì¼ ì „`;
                    
                    const statusText = {
                        'planning': 'ê¸°íš ì¤‘',
                        'preparation': 'ì¤€ë¹„ ì¤‘',
                        'execution': 'ì§„í–‰ ì¤‘',
                        'marketing': 'í™ë³´ ì¤‘',
                        'completed': 'ì™„ë£Œ'
                    }[p.phase] || 'ì§„í–‰ ì¤‘';
                    
                    activities.push({
                        user: p.curator || 'ë‹´ë‹¹ì',
                        action: `${p.title} - ${statusText}`,
                        time: timeStr,
                        avatar: (p.curator || 'ë‹´')[0],
                        icon: 'ğŸ“‹',
                        type: 'project'
                    });
                });
                
                // Add task activities (simulated from project data)
                const taskActivities = [
                    { user: 'ê¹€íë ˆì´í„°', action: 'ì‘í’ˆ ì„ ì • íšŒì˜ ì™„ë£Œ', time: '1ì‹œê°„ ì „', avatar: 'ê¹€', icon: 'âœ…', type: 'task' },
                    { user: 'ì´í•™ì˜ˆì‚¬', action: 'ë„ìŠ¨íŠ¸ êµìœ¡ ìë£Œ ì‘ì„± ì¤‘', time: '2ì‹œê°„ ì „', avatar: 'ì´', icon: 'ğŸ“', type: 'task' },
                    { user: 'ë°•ë””ìì´ë„ˆ', action: 'í¬ìŠ¤í„° ë””ìì¸ ì‹œì•ˆ ì—…ë¡œë“œ', time: '3ì‹œê°„ ì „', avatar: 'ë°•', icon: 'ğŸ¨', type: 'design' },
                    { user: 'ìµœë§ˆì¼€í„°', action: 'SNS í™ë³´ ì½˜í…ì¸  ë°œí–‰', time: '5ì‹œê°„ ì „', avatar: 'ìµœ', icon: 'ğŸ“¢', type: 'marketing' },
                    { user: 'ì •ì½”ë””ë„¤ì´í„°', action: 'ì‘í’ˆ ìš´ì†¡ ì¼ì • í™•ì •', time: '8ì‹œê°„ ì „', avatar: 'ì •', icon: 'ğŸšš', type: 'logistics' }
                ];
                
                // Merge and limit to 8 items
                const allActivities = [...activities, ...taskActivities].slice(0, 8);
                
                const container = document.getElementById('team-activity');
                container.innerHTML = allActivities.map(a => {
                    const bgColor = {
                        'project': 'rgba(139, 92, 246, 0.2)',
                        'task': 'rgba(16, 185, 129, 0.2)',
                        'design': 'rgba(236, 72, 153, 0.2)',
                        'marketing': 'rgba(245, 158, 11, 0.2)',
                        'logistics': 'rgba(59, 130, 246, 0.2)'
                    }[a.type] || 'rgba(255, 255, 255, 0.1)';
                    
                    return `
                        <div class="activity-item" style="background: ${bgColor}; border-left: 3px solid rgba(255,255,255,0.3);">
                            <div class="avatar" style="background: linear-gradient(135deg, #8b5cf6, #ec4899);">${a.avatar}</div>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; margin-bottom: 0.25rem; display: flex; align-items: center; gap: 0.5rem;">
                                    <span>${a.icon}</span>
                                    <span>${a.user}</span>
                                </div>
                                <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.8);">${a.action}</div>
                            </div>
                            <div style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.6); white-space: nowrap;">${a.time}</div>
                        </div>
                    `;
                }).join('');
                
            } catch (error) {
                console.error('Error rendering team activity:', error);
            }
        }
        
        // Quick Action Functions
        function viewMission() {
            const urgentProjects = allProjects.filter(p => {
                const dday = calculateDDay(p.end_date);
                return dday !== null && dday >= 0 && dday <= 14 && p.status === 'active';
            }).sort((a, b) => calculateDDay(a.end_date) - calculateDDay(b.end_date));
            
            if (urgentProjects.length > 0) {
                window.location.href = `/canvas.html?project=${urgentProjects[0].id}`;
            }
        }
        
        function openChecklist() {
            alert('ì²´í¬ë¦¬ìŠ¤íŠ¸ ê¸°ëŠ¥ì€ ê³§ ì¶”ê°€ë©ë‹ˆë‹¤!');
        }
        
        function contactTeam() {
            alert('íŒ€ ì±„íŒ… ê¸°ëŠ¥ì€ ê³§ ì¶”ê°€ë©ë‹ˆë‹¤!');
        }
        
        // Chart.js Configuration
        Chart.defaults.color = 'rgba(255, 255, 255, 0.8)';
        Chart.defaults.borderColor = 'rgba(255, 255, 255, 0.1)';
        
        let charts = {
            monthlyTrend: null,
            typeDistribution: null,
            budget: null,
            phaseDistribution: null
        };
        
        // Render Monthly Trend Chart
        function renderMonthlyTrendChart() {
            console.log('ğŸ“Š Rendering Monthly Trend Chart...');
            const ctx = document.getElementById('monthlyTrendChart');
            if (!ctx) {
                console.error('âŒ Canvas element not found: monthlyTrendChart');
                return;
            }
            if (typeof Chart === 'undefined') {
                console.error('âŒ Chart.js not loaded');
                return;
            }
            console.log('âœ… Chart.js ready, projects count:', allProjects.length);
            
            // Destroy existing chart
            if (charts.monthlyTrend) charts.monthlyTrend.destroy();
            
            // Calculate monthly data (last 6 months)
            const months = [];
            const counts = [];
            const now = new Date();
            
            for (let i = 5; i >= 0; i--) {
                const month = new Date(now.getFullYear(), now.getMonth() - i, 1);
                const monthStr = month.toLocaleDateString('ko-KR', { month: 'short' });
                months.push(monthStr);
                
                // Count projects created in this month
                const count = allProjects.filter(p => {
                    const created = new Date(p.created_at);
                    return created.getMonth() === month.getMonth() && 
                           created.getFullYear() === month.getFullYear();
                }).length;
                counts.push(count);
            }
            
            charts.monthlyTrend = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'ì „ì‹œ ìˆ˜',
                        data: counts,
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointBackgroundColor: '#8b5cf6',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { stepSize: 1 },
                            grid: { color: 'rgba(255, 255, 255, 0.05)' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });
        }
        
        // Render Type Distribution Chart
        function renderTypeDistributionChart() {
            const ctx = document.getElementById('typeDistributionChart');
            if (!ctx || typeof Chart === 'undefined') return;
            
            if (charts.typeDistribution) charts.typeDistribution.destroy();
            
            const typeCounts = {
                permanent: 0,
                special: 0,
                traveling: 0,
                event: 0
            };
            
            allProjects.forEach(p => {
                if (typeCounts.hasOwnProperty(p.type)) {
                    typeCounts[p.type]++;
                }
            });
            
            charts.typeDistribution = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['ìƒì„¤ì „', 'íŠ¹ë³„ì „', 'ìˆœíšŒì „', 'ê¸°íšì „'],
                    datasets: [{
                        data: [typeCounts.permanent, typeCounts.special, typeCounts.traveling, typeCounts.event],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(236, 72, 153, 0.8)',
                            'rgba(245, 158, 11, 0.8)',
                            'rgba(16, 185, 129, 0.8)'
                        ],
                        borderColor: [
                            '#3b82f6',
                            '#ec4899',
                            '#f59e0b',
                            '#10b981'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { padding: 15 }
                        }
                    }
                }
            });
        }
        
        // Render Budget Chart
        function renderBudgetChart() {
            const ctx = document.getElementById('budgetChart');
            if (!ctx || typeof Chart === 'undefined') return;
            
            if (charts.budget) charts.budget.destroy();
            
            // Get top 5 projects by budget
            const budgetProjects = allProjects
                .filter(p => p.budget_total > 0)
                .sort((a, b) => b.budget_total - a.budget_total)
                .slice(0, 5);
            
            const labels = budgetProjects.map(p => p.title.length > 15 ? p.title.substring(0, 15) + '...' : p.title);
            const totalBudgets = budgetProjects.map(p => p.budget_total || 0);
            const usedBudgets = budgetProjects.map(p => p.budget_used || 0);
            
            charts.budget = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'ì´ ì˜ˆì‚°',
                            data: totalBudgets,
                            backgroundColor: 'rgba(139, 92, 246, 0.6)',
                            borderColor: '#8b5cf6',
                            borderWidth: 1
                        },
                        {
                            label: 'ì‚¬ìš© ì˜ˆì‚°',
                            data: usedBudgets,
                            backgroundColor: 'rgba(236, 72, 153, 0.6)',
                            borderColor: '#ec4899',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { padding: 15 }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString() + 'ë§Œì›';
                                }
                            },
                            grid: { color: 'rgba(255, 255, 255, 0.05)' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });
        }
        
        // Render Phase Distribution Chart
        function renderPhaseDistributionChart() {
            const ctx = document.getElementById('phaseDistributionChart');
            if (!ctx || typeof Chart === 'undefined') return;
            
            if (charts.phaseDistribution) charts.phaseDistribution.destroy();
            
            const phaseCounts = {
                planning: 0,
                preparation: 0,
                execution: 0,
                marketing: 0,
                completed: 0
            };
            
            allProjects.forEach(p => {
                if (phaseCounts.hasOwnProperty(p.phase)) {
                    phaseCounts[p.phase]++;
                }
            });
            
            charts.phaseDistribution = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['ê¸°íš', 'ì¤€ë¹„', 'ì§„í–‰', 'í™ë³´', 'ì™„ë£Œ'],
                    datasets: [{
                        data: [phaseCounts.planning, phaseCounts.preparation, phaseCounts.execution, phaseCounts.marketing, phaseCounts.completed],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(245, 158, 11, 0.8)',
                            'rgba(236, 72, 153, 0.8)',
                            'rgba(139, 92, 246, 0.8)',
                            'rgba(16, 185, 129, 0.8)'
                        ],
                        borderColor: [
                            '#3b82f6',
                            '#f59e0b',
                            '#ec4899',
                            '#8b5cf6',
                            '#10b981'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { padding: 15 }
                        }
                    }
                }
            });
        }
        
        // Load Projects
        // Render Performance Metrics
        function renderPerformanceMetrics() {
            // Calculate task completion rate (simulated from projects)
            const totalTasks = allProjects.reduce((sum, p) => sum + (p.task_count || 0), 0);
            const completedTasks = allProjects.reduce((sum, p) => sum + (p.completed_tasks || 0), 0);
            const completionRate = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
            
            document.getElementById('metric-completion-value').textContent = completionRate + '%';
            
            // Calculate budget efficiency
            const totalBudget = allProjects.reduce((sum, p) => sum + (p.budget_total || 0), 0);
            const usedBudget = allProjects.reduce((sum, p) => sum + (p.budget_used || 0), 0);
            const budgetRate = totalBudget > 0 ? Math.round((usedBudget / totalBudget) * 100) : 0;
            
            document.getElementById('metric-budget-value').textContent = budgetRate + '%';
            
            // Average task time (simulated: 24-48 hours)
            const avgHours = 24 + Math.floor(Math.random() * 24);
            document.getElementById('metric-productivity-value').textContent = avgHours;
            
            // Collaboration activities (simulated: 100-200)
            const collaborationCount = 100 + Math.floor(Math.random() * 100);
            document.getElementById('metric-collaboration-value').textContent = collaborationCount;
        }
        
        // Render Exhibition Insights
        function renderExhibitionInsights() {
            // 1. Most Active Exhibition (most tasks)
            const mostActive = [...allProjects].sort((a, b) => (b.task_count || 0) - (a.task_count || 0))[0];
            if (mostActive) {
                document.getElementById('insight-most-active').textContent = mostActive.title;
                document.getElementById('insight-most-active-desc').textContent = 
                    `${mostActive.task_count || 0}ê°œ ì‘ì—… ì§„í–‰ ì¤‘ â€¢ ${mostActive.curator || 'ë‹´ë‹¹ì ë¯¸ì§€ì •'}`;
            }
            
            // 2. Urgent Attention (D-7 or budget > 90%)
            const urgentProjects = allProjects.filter(p => {
                const dday = calculateDDay(p.end_date);
                const budgetRate = p.budget_total > 0 ? (p.budget_used / p.budget_total) : 0;
                return (dday !== null && dday <= 7 && dday >= 0) || budgetRate > 0.9;
            });
            document.getElementById('insight-urgent-count').textContent = urgentProjects.length;
            
            if (urgentProjects.length > 0) {
                const urgentNames = urgentProjects.slice(0, 2).map(p => p.title).join(', ');
                document.getElementById('insight-urgent-desc').textContent = 
                    `${urgentNames}${urgentProjects.length > 2 ? ` ì™¸ ${urgentProjects.length - 2}ê±´` : ''}`;
            } else {
                document.getElementById('insight-urgent-desc').textContent = 'ëª¨ë“  ì „ì‹œê°€ ìˆœì¡°ë¡­ê²Œ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤ âœ“';
            }
            
            // 3. Budget Status
            const totalBudget = allProjects.reduce((sum, p) => sum + (p.budget_total || 0), 0);
            const usedBudget = allProjects.reduce((sum, p) => sum + (p.budget_used || 0), 0);
            const budgetRate = totalBudget > 0 ? Math.round((usedBudget / totalBudget) * 100) : 0;
            
            document.getElementById('insight-budget-total').textContent = (totalBudget / 100000000).toFixed(1) + 'ì–µì›';
            document.getElementById('insight-budget-used').textContent = (usedBudget / 100000000).toFixed(1) + 'ì–µì›';
            document.getElementById('insight-budget-rate').textContent = budgetRate + '%';
            
            // 4. Upcoming Events (this week)
            const today = new Date();
            const nextWeek = new Date(today);
            nextWeek.setDate(today.getDate() + 7);
            
            const upcomingEvents = allProjects.filter(p => {
                if (!p.start_date) return false;
                const startDate = new Date(p.start_date);
                return startDate >= today && startDate <= nextWeek;
            });
            
            document.getElementById('insight-upcoming-count').textContent = upcomingEvents.length + 'ê±´';
            
            if (upcomingEvents.length > 0) {
                const eventNames = upcomingEvents.slice(0, 2).map(p => {
                    const date = new Date(p.start_date);
                    return `${date.getMonth() + 1}/${date.getDate()} ${p.title}`;
                }).join(', ');
                document.getElementById('insight-upcoming-desc').textContent = eventNames;
            } else {
                document.getElementById('insight-upcoming-desc').textContent = 'ì´ë²ˆ ì£¼ ì˜ˆì •ëœ ì „ì‹œê°€ ì—†ìŠµë‹ˆë‹¤';
            }
        }
        
        async function loadProjects() {
            try {
                console.log('ğŸ”„ [Dashboard] Starting to load projects...');
                console.log('ğŸ“ API URL:', `${API_BASE_URL}/api/projects`);
                console.log('ğŸ”‘ Token:', token ? 'Present' : 'Missing');
                
                const response = await fetch(`${API_BASE_URL}/api/projects`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                console.log('ğŸ“¡ Response status:', response.status, response.statusText);
                
                if (!response.ok) throw new Error('Failed to load projects');
                
                const data = await response.json();
                allProjects = data.projects;
                
                console.log('âœ… Projects loaded:', allProjects.length);
                console.log('ğŸ“Š First project:', allProjects[0]?.title);
                
                console.log('ğŸ¨ Rendering dashboard sections...');
                renderHeroMission();
                renderUrgentAlerts();
                renderWeekTimeline();
                renderExhibitions();
                renderExhibitionInsights(); // Add exhibition insights
                updateStats(); // Update project stats
                renderProjectsGrid(); // Render projects grid
                renderTeamActivity();
                renderPerformanceMetrics(); // Add metrics rendering
                
                // Render charts
                console.log('ğŸ“ˆ Rendering charts...');
                renderMonthlyTrendChart();
                renderTypeDistributionChart();
                renderBudgetChart();
                renderPhaseDistributionChart();
                
                console.log('âœ¨ Dashboard rendering complete!');
                
            } catch (error) {
                console.error('âŒ Error loading projects:', error);
                console.error('Stack trace:', error.stack);
            }
        }
        
        // Event Listeners
        document.getElementById('exhibition-filter').addEventListener('change', (e) => {
            renderExhibitions(e.target.value);
        });
        
        // Canvas dropdown toggle
        function toggleCanvasMenu() {
            const dropdown = document.getElementById('canvas-dropdown');
            dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            const dropdown = document.getElementById('canvas-dropdown');
            const canvasMenu = document.querySelector('.canvas-menu');
            
            if (canvasMenu && !canvasMenu.contains(e.target)) {
                dropdown.style.display = 'none';
            }
        });
        
        // Initialize (wait for Chart.js to load)
        if (typeof Chart !== 'undefined') {
            loadProjects();
        } else {
            console.warn('Chart.js not loaded yet, waiting...');
            window.addEventListener('load', () => {
                setTimeout(loadProjects, 100);
            });
        }
    </script>
    
    <!-- PWA Service Worker Registration (Disabled to prevent blocking) -->
    <script>
        // Service Worker disabled to ensure data visualization loads properly
        // Will be re-enabled after proper testing
        /*
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('[PWA] Service Worker registered:', registration.scope);
                    })
                    .catch(error => {
                        console.warn('[PWA] Service Worker registration failed (non-critical):', error);
                    });
            });
        }
        */
    </script>
    
    <!-- Notification System -->
    <script src="/static/js/notification-system.js"></script>
    <script>
        function toggleNotificationPanel() {
            const panel = document.getElementById('notification-panel');
            const isVisible = panel.style.display === 'block';
            panel.style.display = isVisible ? 'none' : 'block';
            
            if (!isVisible) {
                notificationSystem.renderNotificationPanel();
            }
        }

        // Close panel when clicking outside
        document.addEventListener('click', (e) => {
            const panel = document.getElementById('notification-panel');
            const btn = document.getElementById('notification-btn');
            
            if (!btn.contains(e.target) && !panel.contains(e.target)) {
                panel.style.display = 'none';
            }
        });

        // Test notification on page load (only once per session)
        if (!sessionStorage.getItem('welcome_notification_shown')) {
            setTimeout(() => {
                notificationSystem.showInAppNotification(
                    'í™˜ì˜í•©ë‹ˆë‹¤! ì•Œë¦¼ ì‹œìŠ¤í…œì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ğŸ‰',
                    'success'
                );
                sessionStorage.setItem('welcome_notification_shown', 'true');
            }, 2000);
        }
        
        // ========================================
        // Projects Management Functions
        // ========================================
        
        let editingProjectId = null;
        
        // Update project stats
        function updateStats() {
            const total = allProjects.length;
            const active = allProjects.filter(p => p.status === 'active').length;
            const urgent = allProjects.filter(p => {
                const dday = calculateDDay(p.end_date);
                return dday !== null && dday >= 0 && dday <= 7;
            }).length;
            const completed = allProjects.filter(p => p.phase === 'completed').length;
            
            document.getElementById('stat-total').textContent = total;
            document.getElementById('stat-active').textContent = active;
            document.getElementById('stat-urgent').textContent = urgent;
            document.getElementById('stat-completed').textContent = completed;
        }
        
        // Render projects grid
        function renderProjectsGrid() {
            const search = document.getElementById('search-input')?.value.toLowerCase() || '';
            const typeFilter = document.getElementById('type-filter')?.value || 'all';
            const phaseFilter = document.getElementById('phase-filter')?.value || 'all';
            const sortBy = document.getElementById('sort-select')?.value || 'updated';
            
            let filtered = allProjects.filter(p => {
                const matchSearch = !search || p.title.toLowerCase().includes(search) || 
                                   (p.description && p.description.toLowerCase().includes(search));
                const matchType = typeFilter === 'all' || p.type === typeFilter;
                const matchPhase = phaseFilter === 'all' || p.phase === phaseFilter;
                return matchSearch && matchType && matchPhase;
            });
            
            // Sort
            filtered.sort((a, b) => {
                if (sortBy === 'dday') {
                    const ddayA = calculateDDay(a.end_date) ?? 9999;
                    const ddayB = calculateDDay(b.end_date) ?? 9999;
                    return ddayA - ddayB;
                } else if (sortBy === 'title') {
                    return a.title.localeCompare(b.title);
                } else {
                    return new Date(b.updated_at) - new Date(a.updated_at);
                }
            });
            
            const grid = document.getElementById('projects-grid');
            if (!grid) return;
            
            if (filtered.length === 0) {
                grid.innerHTML = `
                    <div style="text-align: center; padding: 4rem 2rem; grid-column: 1 / -1;">
                        <div style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.5;">ğŸ¨</div>
                        <h3 style="font-size: 1.5rem; margin-bottom: 0.5rem; color: rgba(255, 255, 255, 0.8);">ì „ì‹œê°€ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p style="color: rgba(255, 255, 255, 0.6);">ìƒˆ ì „ì‹œë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”!</p>
                    </div>
                `;
                return;
            }
            
            const typeConfig = {
                permanent: { label: 'ìƒì„¤ì „', icon: 'ğŸ›ï¸', class: 'type-permanent' },
                special: { label: 'íŠ¹ë³„ì „', icon: 'âœ¨', class: 'type-special' },
                traveling: { label: 'ìˆœíšŒì „', icon: 'ğŸšŒ', class: 'type-traveling' },
                event: { label: 'ê¸°íšì „', icon: 'ğŸ­', class: 'type-event' }
            };
            
            const phaseConfig = {
                planning: { label: 'ê¸°íš', icon: 'ğŸ’¡', progress: 20 },
                preparation: { label: 'ì¤€ë¹„', icon: 'ğŸ”§', progress: 40 },
                execution: { label: 'ì§„í–‰', icon: 'ğŸš€', progress: 60 },
                marketing: { label: 'í™ë³´', icon: 'ğŸ“¢', progress: 80 },
                completed: { label: 'ì™„ë£Œ', icon: 'âœ…', progress: 100 }
            };
            
            grid.innerHTML = filtered.map(project => {
                const type = typeConfig[project.type] || typeConfig.permanent;
                const phase = phaseConfig[project.phase] || phaseConfig.planning;
                const dday = calculateDDay(project.end_date);
                
                let ddayBadge = '';
                if (dday !== null && dday >= 0) {
                    let ddayColor = '#10b981';
                    if (dday <= 7) ddayColor = '#ef4444';
                    else if (dday <= 14) ddayColor = '#f59e0b';
                    ddayBadge = `<span style="background: ${ddayColor}; color: white; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600;">D-${dday}</span>`;
                }
                
                return `
                    <div class="glass-card" style="padding: 0; overflow: hidden; cursor: default;">
                        <div style="padding: 1.5rem; padding-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                <span style="background: rgba(139, 92, 246, 0.2); color: #a78bfa; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600;">${type.icon} ${type.label}</span>
                                ${ddayBadge}
                            </div>
                            <h3 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 0.75rem; color: white;">${project.title}</h3>
                            <p style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.6); margin-bottom: 1rem; line-height: 1.5;">${project.description || 'ì„¤ëª…ì´ ì—†ìŠµë‹ˆë‹¤.'}</p>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem; margin-bottom: 1rem; font-size: 0.75rem; color: rgba(255, 255, 255, 0.7);">
                                ${project.location ? `<div><i class="fas fa-map-marker-alt"></i> ${project.location}</div>` : '<div></div>'}
                                ${project.curator ? `<div><i class="fas fa-user-tie"></i> ${project.curator}</div>` : '<div></div>'}
                                ${project.artwork_count ? `<div><i class="fas fa-palette"></i> ${project.artwork_count}ì </div>` : '<div></div>'}
                                ${project.start_date ? `<div><i class="fas fa-calendar"></i> ${project.start_date}</div>` : '<div></div>'}
                            </div>
                            <div style="margin-bottom: 0.5rem;">
                                <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.8); margin-bottom: 0.5rem;">${phase.icon} ${phase.label} (${phase.progress}%)</div>
                                <div style="background: rgba(255, 255, 255, 0.1); height: 6px; border-radius: 9999px; overflow: hidden;">
                                    <div style="background: linear-gradient(135deg, #8b5cf6, #ec4899); height: 100%; width: ${phase.progress}%; transition: width 0.3s ease;"></div>
                                </div>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem; padding: 0.75rem 1.5rem; background: rgba(0, 0, 0, 0.2); border-top: 1px solid rgba(255, 255, 255, 0.1);">
                            <button onclick="event.stopPropagation(); openCanvas(${project.id}, 'tasks')" style="padding: 0.5rem; background: rgba(139, 92, 246, 0.2); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 8px; color: #a78bfa; font-size: 0.75rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(139, 92, 246, 0.3)'" onmouseout="this.style.background='rgba(139, 92, 246, 0.2)'">
                                <i class="fas fa-tasks"></i> Tasks
                            </button>
                            <button onclick="event.stopPropagation(); openCanvas(${project.id}, 'workflow')" style="padding: 0.5rem; background: rgba(236, 72, 153, 0.2); border: 1px solid rgba(236, 72, 153, 0.3); border-radius: 8px; color: #f9a8d4; font-size: 0.75rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(236, 72, 153, 0.3)'" onmouseout="this.style.background='rgba(236, 72, 153, 0.2)'">
                                <i class="fas fa-project-diagram"></i> Workflow
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // Open canvas with type selection
        function openCanvas(projectId, type = 'tasks') {
            console.log('ğŸ¨ Opening canvas:', { projectId, type });
            
            if (!projectId) {
                console.error('âŒ No project ID provided');
                alert('í”„ë¡œì íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            if (type === 'workflow') {
                const url = `/workflow.html?project=${projectId}`;
                console.log('ğŸ“ Navigating to:', url);
                window.location.href = url;
            } else {
                const url = `/canvas.html?project=${projectId}`;
                console.log('ğŸ“ Navigating to:', url);
                window.location.href = url;
            }
        }
        
        // Open module-specific workflow canvas
        function openModuleCanvas(module) {
            console.log('ğŸ¯ Opening module canvas:', module);
            
            // Create a new project or use existing module project
            const moduleProjectId = localStorage.getItem(`module_project_${module}`);
            
            if (moduleProjectId) {
                // Open existing module project
                window.location.href = `/workflow.html?project=${moduleProjectId}&module=${module}`;
            } else {
                // Create new module project workflow
                createModuleProject(module);
            }
        }
        
        // Create module-specific project
        async function createModuleProject(module) {
            const moduleNames = {
                'exhibition': 'ì „ì‹œ ê´€ë¦¬',
                'education': 'êµìœ¡ í”„ë¡œê·¸ë¨',
                'archive': 'ìˆ˜ì§‘ & ë³´ì¡´',
                'publication': 'ì¶œíŒ & ì½˜í…ì¸ ',
                'research': 'ì—°êµ¬ & ì¡°ì‚¬',
                'admin': 'í–‰ì • & ìš´ì˜'
            };
            
            const moduleDescriptions = {
                'exhibition': 'ì „ì‹œ ê¸°íšë¶€í„° ì„¤ì¹˜, ìš´ì˜, í‰ê°€ê¹Œì§€ì˜ ì „ì²´ ì›Œí¬í”Œë¡œìš°',
                'education': 'êµìœ¡ í”„ë¡œê·¸ë¨ ê°œë°œ, ì‹¤í–‰ ë° í‰ê°€ ì›Œí¬í”Œë¡œìš°',
                'archive': 'ìœ ë¬¼ ìˆ˜ì§‘, ë“±ë¡, ë³´ì¡´ ë° ê´€ë¦¬ ì›Œí¬í”Œë¡œìš°',
                'publication': 'ë„ë¡, ë‰´ìŠ¤ë ˆí„°, ë””ì§€í„¸ ì½˜í…ì¸  ì œì‘ ì›Œí¬í”Œë¡œìš°',
                'research': 'í•™ìˆ  ì—°êµ¬, í˜„ì¥ ì¡°ì‚¬ ë° ë³´ê³ ì„œ ì‘ì„± ì›Œí¬í”Œë¡œìš°',
                'admin': 'ì˜ˆì‚°, ì¸ì‚¬, ì‹œì„¤ ê´€ë¦¬ ë° ì „ëµ ê¸°íš ì›Œí¬í”Œë¡œìš°'
            };
            
            const moduleTypes = {
                'exhibition': 'special',
                'education': 'event',
                'archive': 'permanent',
                'publication': 'event',
                'research': 'special',
                'admin': 'permanent'
            };
            
            try {
                const result = await window.apiClient.projects.create({
                    title: moduleNames[module],
                    description: moduleDescriptions[module],
                    type: moduleTypes[module],
                    phase: 'planning'
                });
                
                if (result.success && result.data) {
                    const projectId = result.data.id;
                    localStorage.setItem(`module_project_${module}`, projectId);
                    console.log(`âœ… Created module project:`, projectId);
                    
                    // Navigate to workflow with module parameter
                    window.location.href = `/workflow.html?project=${projectId}&module=${module}`;
                } else {
                    throw new Error(result.error || 'Failed to create project');
                }
            } catch (error) {
                console.error('âŒ Error creating module project:', error);
                alert(`ëª¨ë“ˆ í”„ë¡œì íŠ¸ ìƒì„± ì‹¤íŒ¨: ${error.message}`);
            }
        }
        
        // Modal functions
        function openCreateModal() {
            editingProjectId = null;
            const modal = document.getElementById('project-modal');
            if (!modal) {
                alert('í”„ë¡œì íŠ¸ ìƒì„± ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.');
                return;
            }
            document.getElementById('modal-title').textContent = 'ìƒˆ ì „ì‹œ ë§Œë“¤ê¸°';
            document.getElementById('project-form').reset();
            modal.classList.add('active');
        }
        
        // Add event listeners for filters
        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('search-input');
            const typeFilter = document.getElementById('type-filter');
            const phaseFilter = document.getElementById('phase-filter');
            const sortSelect = document.getElementById('sort-select');
            
            if (searchInput) searchInput.addEventListener('input', renderProjectsGrid);
            if (typeFilter) typeFilter.addEventListener('change', renderProjectsGrid);
            if (phaseFilter) phaseFilter.addEventListener('change', renderProjectsGrid);
            if (sortSelect) sortSelect.addEventListener('change', renderProjectsGrid);
        });
    </script>
    
    <!-- Floating Action Button -->
    <script src="/static/js/components/floating-action.js"></script>
    
    <!-- Mobile Navigation -->
    <script src="/static/js/components/mobile-nav.js"></script>
    <script src="/static/js/api-client-d1.js"></script>
</body>
</html>
