<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas - MuseFlow</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <style>
        /* ===============================================
           Figma-inspired Professional Canvas
           White Theme + Clean Design System
           =============================================== */
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            /* Colors - Figma White Theme */
            --bg-primary: #FFFFFF;
            --bg-secondary: #F5F5F5;
            --bg-tertiary: #FAFAFA;
            
            --border-primary: #E5E5E5;
            --border-secondary: #DADADA;
            --border-hover: #C4C4C4;
            
            --text-primary: #1A1A1A;
            --text-secondary: #666666;
            --text-tertiary: #999999;
            
            --accent-primary: #8B5CF6;
            --accent-hover: #7C3AED;
            --accent-light: #EDE9FE;
            
            --success: #10B981;
            --warning: #F59E0B;
            --error: #EF4444;
            
            /* Shadows - Figma-style */
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 4px 16px rgba(0, 0, 0, 0.12);
            --shadow-xl: 0 8px 32px rgba(0, 0, 0, 0.16);
            
            /* Spacing */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 12px;
            --space-lg: 16px;
            --space-xl: 24px;
            --space-2xl: 32px;
            
            /* Border Radius */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            
            /* Typography */
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        body {
            font-family: var(--font-sans);
            background: var(--bg-secondary);
            color: var(--text-primary);
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* ===============================================
           Layout Structure
           =============================================== */
        
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
        }
        
        /* Top Toolbar */
        .toolbar {
            height: 60px;
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border-primary);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--space-lg);
            box-shadow: var(--shadow-sm);
            z-index: 100;
        }
        
        .toolbar-left,
        .toolbar-center,
        .toolbar-right {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }
        
        .logo {
            font-size: 18px;
            font-weight: 700;
            color: var(--accent-primary);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }
        
        .project-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .project-meta {
            font-size: 12px;
            color: var(--text-tertiary);
        }
        
        /* Tool Buttons */
        .tool-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: transparent;
            border-radius: var(--radius-md);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            color: var(--text-secondary);
        }
        
        .tool-btn:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }
        
        .tool-btn.active {
            background: var(--accent-light);
            color: var(--accent-primary);
        }
        
        .btn-primary {
            height: 36px;
            padding: 0 var(--space-lg);
            background: var(--accent-primary);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary:hover {
            background: var(--accent-hover);
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }
        
        /* Left Panel - Node Library */
        .left-panel {
            width: 280px;
            background: var(--bg-primary);
            border-right: 1px solid var(--border-primary);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .panel-header {
            height: 48px;
            padding: 0 var(--space-lg);
            display: flex;
            align-items: center;
            border-bottom: 1px solid var(--border-primary);
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .search-box {
            padding: var(--space-md);
            border-bottom: 1px solid var(--border-primary);
        }
        
        .search-input {
            width: 100%;
            height: 36px;
            padding: 0 var(--space-md);
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            font-size: 13px;
            outline: none;
            transition: all 0.2s;
        }
        
        .search-input:focus {
            border-color: var(--accent-primary);
            background: var(--bg-primary);
        }
        
        .nodes-list {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-md);
        }
        
        .node-category {
            margin-bottom: var(--space-lg);
        }
        
        .category-header {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-tertiary);
            margin-bottom: var(--space-sm);
        }
        
        .node-item {
            height: 36px;
            padding: 0 var(--space-md);
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            cursor: grab;
            margin-bottom: var(--space-xs);
            transition: all 0.2s;
            font-size: 13px;
        }
        
        .node-item:hover {
            background: var(--bg-primary);
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-sm);
        }
        
        .node-item:active {
            cursor: grabbing;
        }
        
        .node-icon {
            width: 16px;
            height: 16px;
            color: var(--text-secondary);
        }
        
        /* Canvas Container */
        .canvas-container {
            flex: 1;
            position: relative;
            background: var(--bg-secondary);
            overflow: hidden;
        }
        
        #canvas {
            width: 100%;
            height: 100%;
            cursor: grab;
        }
        
        #canvas:active {
            cursor: grabbing;
        }
        
        /* Canvas Node */
        .canvas-node {
            position: absolute;
            width: 200px;
            min-height: 100px;
            background: var(--bg-primary);
            border: 2px solid var(--border-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            cursor: move;
            transition: all 0.2s;
        }
        
        .canvas-node:hover {
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-lg);
        }
        
        .canvas-node.selected {
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px var(--accent-light);
        }
        
        .node-header {
            padding: var(--space-md);
            border-bottom: 1px solid var(--border-primary);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }
        
        .node-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .node-body {
            padding: var(--space-md);
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.5;
        }
        
        /* Connection Handles */
        .node-handle {
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--bg-primary);
            border: 2px solid var(--accent-primary);
            border-radius: 50%;
            cursor: crosshair;
            transition: all 0.2s;
        }
        
        .node-handle:hover {
            transform: scale(1.3);
            box-shadow: 0 0 0 3px var(--accent-light);
        }
        
        .node-handle.top {
            top: -6px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .node-handle.right {
            right: -6px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .node-handle.bottom {
            bottom: -6px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .node-handle.left {
            left: -6px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        /* Right Panel - Properties */
        .right-panel {
            width: 280px;
            background: var(--bg-primary);
            border-left: 1px solid var(--border-primary);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .properties-content {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-lg);
        }
        
        .empty-state {
            text-align: center;
            padding: var(--space-2xl);
            color: var(--text-tertiary);
            font-size: 13px;
        }
        
        /* Zoom Controls */
        .zoom-controls {
            position: absolute;
            bottom: 24px;
            right: 24px;
            display: flex;
            gap: var(--space-xs);
            background: var(--bg-primary);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            padding: var(--space-xs);
            box-shadow: var(--shadow-md);
        }
        
        .zoom-btn {
            width: 32px;
            height: 32px;
            border: none;
            background: transparent;
            border-radius: var(--radius-sm);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            color: var(--text-secondary);
        }
        
        .zoom-btn:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }
        
        .zoom-level {
            width: 48px;
            text-align: center;
            font-size: 12px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Mobile Responsive */
        @media (max-width: 768px) {
            .left-panel,
            .right-panel {
                position: absolute;
                z-index: 50;
                height: calc(100vh - 60px);
                transform: translateX(-100%);
                transition: transform 0.3s;
            }
            
            .left-panel.open {
                transform: translateX(0);
            }
            
            .right-panel {
                right: 0;
                transform: translateX(100%);
            }
            
            .right-panel.open {
                transform: translateX(0);
            }
        }
        
        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--border-secondary);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--border-hover);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Top Toolbar -->
        <div class="toolbar">
            <div class="toolbar-left">
                <div class="logo">
                    <i data-lucide="layers" style="width: 20px; height: 20px;"></i>
                    MuseFlow
                </div>
                <div style="width: 1px; height: 24px; background: var(--border-primary);"></div>
                <div>
                    <div class="project-name">Ï†ÑÏãú Í∏∞Ìöç ÏõåÌÅ¨ÌîåÎ°úÏö∞</div>
                    <div class="project-meta">5Í∞ú ÎÖ∏Îìú ‚Ä¢ ÏûêÎèô Ï†ÄÏû•Îê®</div>
                </div>
            </div>
            
            <div class="toolbar-center">
                <div style="display: flex; gap: 4px;">
                    <button class="tool-btn active" title="ÏÑ†ÌÉù ÎèÑÍµ¨">
                        <i data-lucide="mouse-pointer-2" style="width: 18px; height: 18px;"></i>
                    </button>
                    <button class="tool-btn" title="ÏÜê ÎèÑÍµ¨">
                        <i data-lucide="hand" style="width: 18px; height: 18px;"></i>
                    </button>
                    <button class="tool-btn" title="Ïó∞Í≤∞ ÎèÑÍµ¨">
                        <i data-lucide="move" style="width: 18px; height: 18px;"></i>
                    </button>
                </div>
            </div>
            
            <div class="toolbar-right">
                <button class="btn-primary">
                    <i data-lucide="play" style="width: 16px; height: 16px; margin-right: 6px;"></i>
                    ÏõåÌÅ¨ÌîåÎ°úÏö∞ Ïã§Ìñâ
                </button>
                <button class="tool-btn" title="ÏÑ§Ï†ï">
                    <i data-lucide="settings" style="width: 18px; height: 18px;"></i>
                </button>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Left Panel - Node Library -->
            <div class="left-panel">
                <div class="panel-header">
                    <i data-lucide="layers" style="width: 16px; height: 16px; margin-right: 8px;"></i>
                    ÎÖ∏Îìú ÎùºÏù¥Î∏åÎü¨Î¶¨
                </div>
                
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="ÎÖ∏Îìú Í≤ÄÏÉâ... (Cmd+K)">
                </div>
                
                <div class="nodes-list">
                    <!-- Exhibition Category -->
                    <div class="node-category">
                        <div class="category-header">Ï†ÑÏãú Exhibition</div>
                        <div class="node-item" draggable="true" data-type="ex-01">
                            <i data-lucide="lightbulb" class="node-icon"></i>
                            <span>Ï†ÑÏãú Ï£ºÏ†ú ÏÑ†Ï†ï</span>
                        </div>
                        <div class="node-item" draggable="true" data-type="ex-02">
                            <i data-lucide="image" class="node-icon"></i>
                            <span>ÏûëÌíà ÏÑ†Ï†ï</span>
                        </div>
                        <div class="node-item" draggable="true" data-type="ex-03">
                            <i data-lucide="layout" class="node-icon"></i>
                            <span>Í≥µÍ∞Ñ Î∞∞Ïπò Í≥ÑÌöç</span>
                        </div>
                    </div>
                    
                    <!-- Program Category -->
                    <div class="node-category">
                        <div class="category-header">ÌîÑÎ°úÍ∑∏Îû® Program</div>
                        <div class="node-item" draggable="true" data-type="pr-01">
                            <i data-lucide="megaphone" class="node-icon"></i>
                            <span>ÎßàÏºÄÌåÖ Í≥ÑÌöç</span>
                        </div>
                        <div class="node-item" draggable="true" data-type="pr-02">
                            <i data-lucide="calendar" class="node-icon"></i>
                            <span>Ï†ÑÏãú Ïò§Ìîà</span>
                        </div>
                    </div>
                    
                    <!-- AI Category -->
                    <div class="node-category">
                        <div class="category-header">AI ÎèÑÍµ¨</div>
                        <div class="node-item" draggable="true" data-type="ai-01">
                            <i data-lucide="sparkles" class="node-icon"></i>
                            <span>AI ÌÖçÏä§Ìä∏ ÏÉùÏÑ±</span>
                        </div>
                        <div class="node-item" draggable="true" data-type="ai-02">
                            <i data-lucide="file-text" class="node-icon"></i>
                            <span>Google Docs Ï†ÄÏû•</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Canvas Container -->
            <div class="canvas-container" id="canvas-container">
                <canvas id="canvas"></canvas>
                
                <!-- Sample Nodes (will be generated by JS) -->
                <div id="nodes-container"></div>
                
                <!-- Zoom Controls -->
                <div class="zoom-controls">
                    <button class="zoom-btn" id="zoom-out">
                        <i data-lucide="minus" style="width: 16px; height: 16px;"></i>
                    </button>
                    <div class="zoom-level" id="zoom-level">100%</div>
                    <button class="zoom-btn" id="zoom-in">
                        <i data-lucide="plus" style="width: 16px; height: 16px;"></i>
                    </button>
                    <button class="zoom-btn" id="zoom-fit">
                        <i data-lucide="maximize-2" style="width: 16px; height: 16px;"></i>
                    </button>
                </div>
            </div>
            
            <!-- Right Panel - Properties -->
            <div class="right-panel">
                <div class="panel-header">
                    <i data-lucide="sliders" style="width: 16px; height: 16px; margin-right: 8px;"></i>
                    ÏÜçÏÑ±
                </div>
                
                <div class="properties-content">
                    <div class="empty-state">
                        <i data-lucide="mouse-pointer-click" style="width: 48px; height: 48px; margin: 0 auto 16px; opacity: 0.3;"></i>
                        <p>ÎÖ∏ÎìúÎ•º ÏÑ†ÌÉùÌïòÎ©¥<br>ÏÜçÏÑ±ÏùÑ Ìé∏ÏßëÌï† Ïàò ÏûàÏäµÎãàÎã§</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Initialize Lucide icons
        lucide.createIcons();
        
        // Canvas State
        const state = {
            nodes: [],
            connections: [],
            selectedNode: null,
            zoom: 1,
            pan: { x: 0, y: 0 },
            isDragging: false,
            dragStart: null
        };
        
        // Create Sample Workflow on First Visit
        function createSampleWorkflow() {
            const hasSample = localStorage.getItem('museflow_canvas_sample');
            if (hasSample) return;
            
            console.log('üé® Creating sample workflow...');
            
            const sampleNodes = [
                { id: '1', type: 'ex-01', title: 'Ï†ÑÏãú Ï£ºÏ†ú ÏÑ†Ï†ï', x: 100, y: 100 },
                { id: '2', type: 'ex-02', title: 'ÏûëÌíà ÏÑ†Ï†ï', x: 350, y: 100 },
                { id: '3', type: 'ex-03', title: 'Í≥µÍ∞Ñ Î∞∞Ïπò Í≥ÑÌöç', x: 600, y: 100 },
                { id: '4', type: 'pr-01', title: 'ÎßàÏºÄÌåÖ Í≥ÑÌöç', x: 225, y: 280 },
                { id: '5', type: 'pr-02', title: 'Ï†ÑÏãú Ïò§Ìîà', x: 475, y: 280 }
            ];
            
            sampleNodes.forEach(node => {
                createNode(node);
            });
            
            localStorage.setItem('museflow_canvas_sample', 'true');
            console.log('‚úÖ Sample workflow created');
        }
        
        // Create Node
        function createNode(data) {
            const node = document.createElement('div');
            node.className = 'canvas-node';
            node.id = `node-${data.id}`;
            node.style.left = data.x + 'px';
            node.style.top = data.y + 'px';
            
            node.innerHTML = `
                <div class="node-header">
                    <i data-lucide="circle" style="width: 16px; height: 16px; color: var(--accent-primary);"></i>
                    <span class="node-title">${data.title}</span>
                </div>
                <div class="node-body">
                    Ï†ÑÏãú Í∏∞Ìöç ÌîÑÎ°úÏÑ∏Ïä§Ïùò ÏùºÎ∂Ä
                </div>
                <div class="node-handle top"></div>
                <div class="node-handle right"></div>
                <div class="node-handle bottom"></div>
                <div class="node-handle left"></div>
            `;
            
            document.getElementById('nodes-container').appendChild(node);
            lucide.createIcons();
            
            // Make node draggable
            let isDragging = false;
            let startX, startY, nodeX, nodeY;
            
            node.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('node-handle')) return;
                isDragging = true;
                startX = e.clientX;
                startY = e.clientY;
                nodeX = parseInt(node.style.left);
                nodeY = parseInt(node.style.top);
                node.style.zIndex = 1000;
            });
            
            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                const dx = e.clientX - startX;
                const dy = e.clientY - startY;
                node.style.left = (nodeX + dx) + 'px';
                node.style.top = (nodeY + dy) + 'px';
            });
            
            document.addEventListener('mouseup', () => {
                if (isDragging) {
                    isDragging = false;
                    node.style.zIndex = '';
                }
            });
            
            state.nodes.push({ id: data.id, element: node, data });
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ Initializing Figma-style Canvas...');
            createSampleWorkflow();
        });
        
        // Zoom Controls
        document.getElementById('zoom-in').addEventListener('click', () => {
            state.zoom = Math.min(state.zoom + 0.1, 2);
            updateZoom();
        });
        
        document.getElementById('zoom-out').addEventListener('click', () => {
            state.zoom = Math.max(state.zoom - 0.1, 0.5);
            updateZoom();
        });
        
        document.getElementById('zoom-fit').addEventListener('click', () => {
            state.zoom = 1;
            state.pan = { x: 0, y: 0 };
            updateZoom();
        });
        
        function updateZoom() {
            const container = document.getElementById('nodes-container');
            container.style.transform = `scale(${state.zoom}) translate(${state.pan.x}px, ${state.pan.y}px)`;
            document.getElementById('zoom-level').textContent = Math.round(state.zoom * 100) + '%';
        }
    </script>
</body>
</html>
